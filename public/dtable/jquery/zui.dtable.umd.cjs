var ri=Object.defineProperty;var ii=(D,A,z)=>A in D?ri(D,A,{enumerable:!0,configurable:!0,writable:!0,value:z}):D[A]=z;var W=(D,A,z)=>(ii(D,typeof A!="symbol"?A+"":A,z),z),go=(D,A,z)=>{if(!A.has(D))throw TypeError("Cannot "+z)};var g=(D,A,z)=>(go(D,A,"read from private field"),z?z.call(D):A.get(D)),x=(D,A,z)=>{if(A.has(D))throw TypeError("Cannot add the same private member more than once");A instanceof WeakSet?A.add(D):A.set(D,z)},M=(D,A,z,_e)=>(go(D,A,"write to private field"),_e?_e.call(D,z):A.set(D,z),z);var V=(D,A,z)=>(go(D,A,"access private method"),z);(function(D,A){typeof exports=="object"&&typeof module<"u"?A(exports):typeof define=="function"&&define.amd?define(["exports"],A):(D=typeof globalThis<"u"?globalThis:D||self,A(D.zui={}))})(this,function(D){var te,oe,Ke,ge,et,os,ne,xe,X,ye,me,mt,be,ke,ue,Q,de,F,Y,Z,Se,Fe,Ve,se,Re,Ee,bt,ds,wt,ps,vt,_s,Ct,gs,Be,yo,xt,kt,Ge,Xe,St,Rt,Et,ys,Mt,ms,Dt,bs,Ye,pe,ee,Me,De,$t;"use strict";const A=`:root{--color-gray-50:#f8fafc;--color-gray-100:#f1f5f9;--color-gray-200:#e2e8f0;--color-gray-300:#cbd5e1;--color-gray-400:#94a3b8;--color-gray-500:#64748b;--color-gray-600:#475569;--color-gray-700:#334155;--color-gray-800:#1e293b;--color-gray-900:#0f172a;--color-gray-50-rgb:248,250,252;--color-gray-100-rgb:241,245,249;--color-gray-200-rgb:226,232,240;--color-gray-300-rgb:203,213,225;--color-gray-400-rgb:148,163,184;--color-gray-500-rgb:100,116,139;--color-gray-600-rgb:71,85,105;--color-gray-700-rgb:51,65,85;--color-gray-800-rgb:30,41,59;--color-gray-900-rgb:15,23,42;--color-primary-50:#eff6ff;--color-primary-100:#dbeafe;--color-primary-200:#bfdbfe;--color-primary-300:#93c5fd;--color-primary-400:#60a5fa;--color-primary-500:#3b82f6;--color-primary-600:#2563eb;--color-primary-700:#1d4ed8;--color-primary-800:#1e40af;--color-primary-900:#1e3a8a;--color-primary-50-rgb:239,246,255;--color-primary-100-rgb:219,234,254;--color-primary-200-rgb:191,219,254;--color-primary-300-rgb:147,197,253;--color-primary-400-rgb:96,165,250;--color-primary-500-rgb:59,130,246;--color-primary-600-rgb:37,99,235;--color-primary-700-rgb:29,78,216;--color-primary-800-rgb:30,64,175;--color-primary-900-rgb:30,58,138;--color-secondary-50:#f0f9ff;--color-secondary-100:#e0f2fe;--color-secondary-200:#bae6fd;--color-secondary-300:#7dd3fc;--color-secondary-400:#38bdf8;--color-secondary-500:#0ea5e9;--color-secondary-600:#0284c7;--color-secondary-700:#0369a1;--color-secondary-800:#075985;--color-secondary-900:#0c4a6e;--color-secondary-50-rgb:240,249,255;--color-secondary-100-rgb:224,242,254;--color-secondary-200-rgb:186,230,253;--color-secondary-300-rgb:125,211,252;--color-secondary-400-rgb:56,189,248;--color-secondary-500-rgb:14,165,233;--color-secondary-600-rgb:2,132,199;--color-secondary-700-rgb:3,105,161;--color-secondary-800-rgb:7,89,133;--color-secondary-900-rgb:12,74,110;--color-success-50:#f0fdf4;--color-success-100:#dcfce7;--color-success-200:#bbf7d0;--color-success-300:#86efac;--color-success-400:#4ade80;--color-success-500:#22c55e;--color-success-600:#16a34a;--color-success-700:#15803d;--color-success-800:#166534;--color-success-900:#14532d;--color-success-50-rgb:240,253,244;--color-success-100-rgb:220,252,231;--color-success-200-rgb:187,247,208;--color-success-300-rgb:134,239,172;--color-success-400-rgb:74,222,128;--color-success-500-rgb:34,197,94;--color-success-600-rgb:22,163,74;--color-success-700-rgb:21,128,61;--color-success-800-rgb:22,101,52;--color-success-900-rgb:20,83,45;--color-warning-50:#fffbeb;--color-warning-100:#fef3c7;--color-warning-200:#fde68a;--color-warning-300:#fcd34d;--color-warning-400:#fbbf24;--color-warning-500:#f59e0b;--color-warning-600:#d97706;--color-warning-700:#b45309;--color-warning-800:#92400e;--color-warning-900:#78350f;--color-warning-50-rgb:255,251,235;--color-warning-100-rgb:254,243,199;--color-warning-200-rgb:253,230,138;--color-warning-300-rgb:252,211,77;--color-warning-400-rgb:251,191,36;--color-warning-500-rgb:245,158,11;--color-warning-600-rgb:217,119,6;--color-warning-700-rgb:180,83,9;--color-warning-800-rgb:146,64,14;--color-warning-900-rgb:120,53,15;--color-danger-50:#fef2f2;--color-danger-100:#fee2e2;--color-danger-200:#fecaca;--color-danger-300:#fca5a5;--color-danger-400:#f87171;--color-danger-500:#ef4444;--color-danger-600:#dc2626;--color-danger-700:#b91c1c;--color-danger-800:#991b1b;--color-danger-900:#7f1d1d;--color-danger-50-rgb:254,242,242;--color-danger-100-rgb:254,226,226;--color-danger-200-rgb:254,202,202;--color-danger-300-rgb:252,165,165;--color-danger-400-rgb:248,113,113;--color-danger-500-rgb:239,68,68;--color-danger-600-rgb:220,38,38;--color-danger-700-rgb:185,28,28;--color-danger-800-rgb:153,27,27;--color-danger-900-rgb:127,29,29;--color-important-50:#fdf2f8;--color-important-100:#fce7f3;--color-important-200:#fbcfe8;--color-important-300:#f9a8d4;--color-important-400:#f472b6;--color-important-500:#ec4899;--color-important-600:#db2777;--color-important-700:#be185d;--color-important-800:#9d174d;--color-important-900:#831843;--color-important-50-rgb:253,242,248;--color-important-100-rgb:252,231,243;--color-important-200-rgb:251,207,232;--color-important-300-rgb:249,168,212;--color-important-400-rgb:244,114,182;--color-important-500-rgb:236,72,153;--color-important-600-rgb:219,39,119;--color-important-700-rgb:190,24,93;--color-important-800-rgb:157,23,77;--color-important-900-rgb:131,24,67;--color-special-50:#faf5ff;--color-special-100:#f3e8ff;--color-special-200:#e9d5ff;--color-special-300:#d8b4fe;--color-special-400:#c084fc;--color-special-500:#a855f7;--color-special-600:#9333ea;--color-special-700:#7e22ce;--color-special-800:#6b21a8;--color-special-900:#581c87;--color-special-50-rgb:250,245,255;--color-special-100-rgb:243,232,255;--color-special-200-rgb:233,213,255;--color-special-300-rgb:216,180,254;--color-special-400-rgb:192,132,252;--color-special-500-rgb:168,85,247;--color-special-600-rgb:147,51,234;--color-special-700-rgb:126,34,206;--color-special-800-rgb:107,33,168;--color-special-900-rgb:88,28,135;--color-inherit:inherit;--color-transparent:transparent;--color-current:currentColor;--color-black:#000;--color-white:#fff;--color-canvas:#fff;--color-inverse:#000;--color-surface:#f1f5f9;--color-fore:#334155;--color-focus:#bfdbfe;--color-link:#3b82f6;--color-link-hover:#2563eb;--color-link-visited:#1d4ed8;--color-border:#e2e8f0;--color-border-strong:#cbd5e1;--color-border-light:#f1f5f9;--color-black-rgb:0,0,0;--color-white-rgb:255,255,255;--color-canvas-rgb:255,255,255;--color-inverse-rgb:0,0,0;--color-surface-rgb:241,245,249;--color-fore-rgb:51,65,85;--color-focus-rgb:191,219,254;--color-link-rgb:59,130,246;--color-link-hover-rgb:37,99,235;--color-link-visited-rgb:29,78,216;--color-border-rgb:226,232,240;--color-border-strong-rgb:203,213,225;--color-border-light-rgb:241,245,249;--radius-none:0px;--radius-sm:2px;--radius:4px;--radius-md:6px;--radius-lg:8px;--radius-xl:12px;--radius-2xl:16px;--radius-3xl:24px;--radius-full:9999px;--shadow-sm:0 1px 2px 0 rgba(0,0,0,.05);--shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px -1px rgba(0,0,0,.1);--shadow-md:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);--shadow-lg:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--shadow-xl:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);--shadow-2xl:0 25px 50px -12px rgba(0,0,0,.25);--shadow-inner:inset 0 2px 4px 0 rgba(0,0,0,.05);--shadow-none:none;--space:4px;--root-font-size:16px}*,:after,:before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgba(59,130,246,.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }
`;function z(e,t){function o(n,...r){return $(this).each(function(){var c;const s=$(this),l=s.data(e.KEY);l?typeof n=="string"&&((c=l[n])==null||c.call(l,...r)):(typeof n=="string"&&(n={}),s.data(e.KEY,new e(this,{...s.data(),...n})))})}$.extend(!0,$,{zui3:{[t??e.NAME]:e},fn:{[(t??e.NAME).toLowerCase()]:o}})}var _e,T,mo,bo,Ie,wo,tt={},vo=[],ws=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function ce(e,t){for(var o in t)e[o]=t[o];return e}function Co(e){var t=e.parentNode;t&&t.removeChild(e)}function xo(e,t,o){var n,r,s,l={};for(s in t)s=="key"?n=t[s]:s=="ref"?r=t[s]:l[s]=t[s];if(arguments.length>2&&(l.children=arguments.length>3?_e.call(arguments,2):o),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)l[s]===void 0&&(l[s]=e.defaultProps[s]);return ot(e,l,n,r,null)}function ot(e,t,o,n,r){var s={type:e,props:t,key:o,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r??++mo};return r==null&&T.vnode!=null&&T.vnode(s),s}function vs(){return{current:null}}function nt(e){return e.children}function st(e,t){this.props=e,this.context=t}function $e(e,t){if(t==null)return e.__?$e(e.__,e.__.__k.indexOf(e)+1):null;for(var o;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null)return o.__e;return typeof e.type=="function"?$e(e):null}function ko(e){var t,o;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null){e.__e=e.__c.base=o.__e;break}return ko(e)}}function So(e){(!e.__d&&(e.__d=!0)&&Ie.push(e)&&!rt.__r++||wo!==T.debounceRendering)&&((wo=T.debounceRendering)||setTimeout)(rt)}function rt(){for(var e;rt.__r=Ie.length;)e=Ie.sort(function(t,o){return t.__v.__b-o.__v.__b}),Ie=[],e.some(function(t){var o,n,r,s,l,c;t.__d&&(l=(s=(o=t).__v).__e,(c=o.__P)&&(n=[],(r=ce({},s)).__v=s.__v+1,At(c,s,r,o.__n,c.ownerSVGElement!==void 0,s.__h!=null?[l]:null,n,l??$e(s),s.__h),Ao(n,s),s.__e!=l&&ko(s)))})}function Ro(e,t,o,n,r,s,l,c,f,d){var i,p,h,a,u,m,_,y=n&&n.__k||vo,b=y.length;for(o.__k=[],i=0;i<t.length;i++)if((a=o.__k[i]=(a=t[i])==null||typeof a=="boolean"?null:typeof a=="string"||typeof a=="number"||typeof a=="bigint"?ot(null,a,null,null,a):Array.isArray(a)?ot(nt,{children:a},null,null,null):a.__b>0?ot(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a)!=null){if(a.__=o,a.__b=o.__b+1,(h=y[i])===null||h&&a.key==h.key&&a.type===h.type)y[i]=void 0;else for(p=0;p<b;p++){if((h=y[p])&&a.key==h.key&&a.type===h.type){y[p]=void 0;break}h=null}At(e,a,h=h||tt,r,s,l,c,f,d),u=a.__e,(p=a.ref)&&h.ref!=p&&(_||(_=[]),h.ref&&_.push(h.ref,null,a),_.push(p,a.__c||u,a)),u!=null?(m==null&&(m=u),typeof a.type=="function"&&a.__k===h.__k?a.__d=f=Eo(a,f,e):f=Mo(e,a,h,y,u,f),typeof o.type=="function"&&(o.__d=f)):f&&h.__e==f&&f.parentNode!=e&&(f=$e(h))}for(o.__e=m,i=b;i--;)y[i]!=null&&Ho(y[i],y[i]);if(_)for(i=0;i<_.length;i++)No(_[i],_[++i],_[++i])}function Eo(e,t,o){for(var n,r=e.__k,s=0;r&&s<r.length;s++)(n=r[s])&&(n.__=e,t=typeof n.type=="function"?Eo(n,t,o):Mo(o,n,n,r,n.__e,t));return t}function Mo(e,t,o,n,r,s){var l,c,f;if(t.__d!==void 0)l=t.__d,t.__d=void 0;else if(o==null||r!=s||r.parentNode==null)e:if(s==null||s.parentNode!==e)e.appendChild(r),l=null;else{for(c=s,f=0;(c=c.nextSibling)&&f<n.length;f+=2)if(c==r)break e;e.insertBefore(r,s),l=s}return l!==void 0?l:r.nextSibling}function Cs(e,t,o,n,r){var s;for(s in o)s==="children"||s==="key"||s in t||it(e,s,null,o[s],n);for(s in t)r&&typeof t[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||o[s]===t[s]||it(e,s,t[s],o[s],n)}function Do(e,t,o){t[0]==="-"?e.setProperty(t,o):e[t]=o==null?"":typeof o!="number"||ws.test(t)?o:o+"px"}function it(e,t,o,n,r){var s;e:if(t==="style")if(typeof o=="string")e.style.cssText=o;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)o&&t in o||Do(e.style,t,"");if(o)for(t in o)n&&o[t]===n[t]||Do(e.style,t,o[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=o,o?n||e.addEventListener(t,s?$o:Io,s):e.removeEventListener(t,s?$o:Io,s);else if(t!=="dangerouslySetInnerHTML"){if(r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&t.indexOf("-")==-1?e.removeAttribute(t):e.setAttribute(t,o))}}function Io(e){this.l[e.type+!1](T.event?T.event(e):e)}function $o(e){this.l[e.type+!0](T.event?T.event(e):e)}function At(e,t,o,n,r,s,l,c,f){var d,i,p,h,a,u,m,_,y,b,C,S,j,E,I,v=t.type;if(t.constructor!==void 0)return null;o.__h!=null&&(f=o.__h,c=t.__e=o.__e,t.__h=null,s=[c]),(d=T.__b)&&d(t);try{e:if(typeof v=="function"){if(_=t.props,y=(d=v.contextType)&&n[d.__c],b=d?y?y.props.value:d.__:n,o.__c?m=(i=t.__c=o.__c).__=i.__E:("prototype"in v&&v.prototype.render?t.__c=i=new v(_,b):(t.__c=i=new st(_,b),i.constructor=v,i.render=ks),y&&y.sub(i),i.props=_,i.state||(i.state={}),i.context=b,i.__n=n,p=i.__d=!0,i.__h=[],i._sb=[]),i.__s==null&&(i.__s=i.state),v.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=ce({},i.__s)),ce(i.__s,v.getDerivedStateFromProps(_,i.__s))),h=i.props,a=i.state,p)v.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v.getDerivedStateFromProps==null&&_!==h&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(_,b),!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(_,i.__s,b)===!1||t.__v===o.__v){for(i.props=_,i.state=i.__s,t.__v!==o.__v&&(i.__d=!1),i.__v=t,t.__e=o.__e,t.__k=o.__k,t.__k.forEach(function(w){w&&(w.__=t)}),C=0;C<i._sb.length;C++)i.__h.push(i._sb[C]);i._sb=[],i.__h.length&&l.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(_,i.__s,b),i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(h,a,u)})}if(i.context=b,i.props=_,i.__v=t,i.__P=e,S=T.__r,j=0,"prototype"in v&&v.prototype.render){for(i.state=i.__s,i.__d=!1,S&&S(t),d=i.render(i.props,i.state,i.context),E=0;E<i._sb.length;E++)i.__h.push(i._sb[E]);i._sb=[]}else do i.__d=!1,S&&S(t),d=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++j<25);i.state=i.__s,i.getChildContext!=null&&(n=ce(ce({},n),i.getChildContext())),p||i.getSnapshotBeforeUpdate==null||(u=i.getSnapshotBeforeUpdate(h,a)),I=d!=null&&d.type===nt&&d.key==null?d.props.children:d,Ro(e,Array.isArray(I)?I:[I],t,o,n,r,s,l,c,f),i.base=t.__e,t.__h=null,i.__h.length&&l.push(i),m&&(i.__E=i.__=null),i.__e=!1}else s==null&&t.__v===o.__v?(t.__k=o.__k,t.__e=o.__e):t.__e=xs(o.__e,t,o,n,r,s,l,f);(d=T.diffed)&&d(t)}catch(w){t.__v=null,(f||s!=null)&&(t.__e=c,t.__h=!!f,s[s.indexOf(c)]=null),T.__e(w,t,o)}}function Ao(e,t){T.__c&&T.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(n){n.call(o)})}catch(n){T.__e(n,o.__v)}})}function xs(e,t,o,n,r,s,l,c){var f,d,i,p=o.props,h=t.props,a=t.type,u=0;if(a==="svg"&&(r=!0),s!=null){for(;u<s.length;u++)if((f=s[u])&&"setAttribute"in f==!!a&&(a?f.localName===a:f.nodeType===3)){e=f,s[u]=null;break}}if(e==null){if(a===null)return document.createTextNode(h);e=r?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a,h.is&&h),s=null,c=!1}if(a===null)p===h||c&&e.data===h||(e.data=h);else{if(s=s&&_e.call(e.childNodes),d=(p=o.props||tt).dangerouslySetInnerHTML,i=h.dangerouslySetInnerHTML,!c){if(s!=null)for(p={},u=0;u<e.attributes.length;u++)p[e.attributes[u].name]=e.attributes[u].value;(i||d)&&(i&&(d&&i.__html==d.__html||i.__html===e.innerHTML)||(e.innerHTML=i&&i.__html||""))}if(Cs(e,h,p,r,c),i)t.__k=[];else if(u=t.props.children,Ro(e,Array.isArray(u)?u:[u],t,o,n,r&&a!=="foreignObject",s,l,s?s[0]:o.__k&&$e(o,0),c),s!=null)for(u=s.length;u--;)s[u]!=null&&Co(s[u]);c||("value"in h&&(u=h.value)!==void 0&&(u!==e.value||a==="progress"&&!u||a==="option"&&u!==p.value)&&it(e,"value",u,p.value,!1),"checked"in h&&(u=h.checked)!==void 0&&u!==e.checked&&it(e,"checked",u,p.checked,!1))}return e}function No(e,t,o){try{typeof e=="function"?e(t):e.current=t}catch(n){T.__e(n,o)}}function Ho(e,t,o){var n,r;if(T.unmount&&T.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||No(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){T.__e(s,t)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(r=0;r<n.length;r++)n[r]&&Ho(n[r],t,o||typeof e.type!="function");o||e.__e==null||Co(e.__e),e.__=e.__e=e.__d=void 0}function ks(e,t,o){return this.constructor(e,o)}function Ss(e,t,o){var n,r,s;T.__&&T.__(e,t),r=(n=typeof o=="function")?null:o&&o.__k||t.__k,s=[],At(t,e=(!n&&o||t).__k=xo(nt,null,[e]),r||tt,tt,t.ownerSVGElement!==void 0,!n&&o?[o]:r?null:t.firstChild?_e.call(t.childNodes):null,s,!n&&o?o:r?r.__e:t.firstChild,n),Ao(s,e)}_e=vo.slice,T={__e:function(e,t,o,n){for(var r,s,l;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),l=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,n||{}),l=r.__d),l)return r.__E=r}catch(c){e=c}throw e}},mo=0,bo=function(e){return e!=null&&e.constructor===void 0},st.prototype.setState=function(e,t){var o;o=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ce({},this.state),typeof e=="function"&&(e=e(ce({},o),this.props)),e&&ce(o,e),e!=null&&this.__v&&(t&&this._sb.push(t),So(this))},st.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),So(this))},st.prototype.render=nt,Ie=[],rt.__r=0;var Rs=0;function To(e,t,o,n,r){var s,l,c={};for(l in t)l=="ref"?s=t[l]:c[l]=t[l];var f={type:e,props:c,key:o,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Rs,__source:r,__self:n};if(typeof e=="function"&&(s=e.defaultProps))for(l in s)c[l]===void 0&&(c[l]=s[l]);return T.vnode&&T.vnode(f),f}class Es{constructor(t=""){x(this,te,void 0);typeof t=="object"?M(this,te,t):M(this,te,document.appendChild(document.createComment(t)))}on(t,o,n){g(this,te).addEventListener(t,o,n)}once(t,o,n){g(this,te).addEventListener(t,o,{once:!0,...n})}off(t,o,n){g(this,te).removeEventListener(t,o,n)}emit(t){return g(this,te).dispatchEvent(t),t}}te=new WeakMap;const Nt=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);class Ht extends Es{on(t,o,n){super.on(t,o,n)}off(t,o,n){super.off(t,o,n)}once(t,o,n){super.once(t,o,n)}emit(t,o){return typeof t=="string"&&(Nt.has(t)?(t=new Event(t),Object.assign(t,{detail:o})):t=new CustomEvent(t,{detail:o})),super.emit(Ht.createEvent(t,o))}static createEvent(t,o){return typeof t=="string"&&(Nt.has(t)?(t=new Event(t),Object.assign(t,{detail:o})):t=new CustomEvent(t,{detail:o})),t}}class Po extends Ht{constructor(o="",n){super(o);x(this,ge);x(this,oe,new Map);x(this,Ke,void 0);M(this,Ke,n==null?void 0:n.customEventSuffix)}on(o,n,r){o=V(this,ge,et).call(this,o),super.on(o,n,r),g(this,oe).set(n,[o,r])}off(o,n,r){o=V(this,ge,et).call(this,o),super.off(o,n,r),g(this,oe).delete(n)}once(o,n,r){o=V(this,ge,et).call(this,o);const s=l=>{n(l),g(this,oe).delete(s)};super.once(o,s,r),g(this,oe).set(s,[o,r])}emit(o,n){return typeof o=="string"&&(o=V(this,ge,et).call(this,o)),super.emit(o,n)}offAll(){Array.from(g(this,oe).entries()).forEach(([o,[n,r]])=>{super.off(n,o,r)}),g(this,oe).clear()}}oe=new WeakMap,Ke=new WeakMap,ge=new WeakSet,et=function(o){const n=g(this,Ke);return Nt.has(o)||typeof n!="string"||o.endsWith(n)?o:`${o}${n}`};function Ms(e,t){if(e==null)return[e,void 0];typeof t=="string"&&(t=t.split("."));const o=t.join(".");let n=e;const r=[n];for(;typeof n=="object"&&n!==null&&t.length;){let s=t.shift(),l;const c=s.indexOf("[");if(c>0&&c<s.length-1&&s.endsWith("]")&&(l=s.substring(c+1,s.length-1),s=s.substring(0,c)),n=n[s],r.push(n),l!==void 0)if(typeof n=="object"&&n!==null)n instanceof Map?n=n.get(l):n=n[l],r.push(n);else throw new Error(`Cannot access property "${s}[${l}]", the full path is "${o}".`)}if(t.length)throw new Error(`Cannot access property with rest path "${t.join(".")}", the full path is "${o}".`);return r}function Ds(e,t,o){const n=Ms(e,t),r=n[n.length-1];return r===void 0?o:r}function Tt(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function Pt(e,...t){if(!t.length)return e;const o=t.shift();if(Tt(e)&&Tt(o))for(const n in o)Tt(o[n])?(e[n]||Object.assign(e,{[n]:{}}),Pt(e[n],o[n])):Object.assign(e,{[n]:o[n]});return Pt(e,...t)}function Ae(e,...t){if(t.length===0)return e;if(t.length===1&&typeof t[0]=="object"&&t[0]){const o=t[0];return Object.keys(o).forEach(n=>{const r=o[n]??0;e=e.replace(new RegExp(`\\{${n}\\}`,"g"),`${r}`)}),e}for(let o=0;o<t.length;o++){const n=t[o]??"";e=e.replace(new RegExp(`\\{${o}\\}`,"g"),`${n}`)}return e}let Ot=((os=document.documentElement.getAttribute("lang"))==null?void 0:os.toLowerCase())??"zh_cn",ae;function Is(){return Ot}function $s(e){Ot=e.toLowerCase()}function As(e,t){ae||(ae={}),typeof e=="string"&&(e={[e]:t??{}}),Pt(ae,e)}function Ne(e,t,o,n,r,s){Array.isArray(e)?ae&&e.unshift(ae):e=ae?[ae,e]:[e],typeof o=="string"&&(s=r,r=n,n=o,o=void 0);const l=r||Ot;let c;for(const f of e){if(!f)continue;const d=f[l];if(!d)continue;const i=s&&f===ae?`${s}.${t}`:t;if(c=Ds(d,i),c!==void 0)break}return c===void 0?n:o?Ae(c,...Array.isArray(o)?o:[o]):c}Ne.addLang=As,Ne.getCode=Is,Ne.setCode=$s;function Ns(e){return Object.fromEntries(Object.entries(e).map(([t,o])=>{if(typeof o=="string")try{o=JSON.parse(o)}catch{}return[t,o]}))}const jt=new Map;class zt{constructor(t,o){x(this,ne,void 0);x(this,xe,void 0);x(this,X,void 0);t=typeof t=="string"?document.querySelector(t):t,this.constructor.EVENTS&&M(this,X,new Po(t,{customEventSuffix:`.${this.constructor.KEY}`})),M(this,ne,{...this.constructor.DEFAULT}),this.setOptions({...t instanceof HTMLElement?Ns(t.dataset):null,...o}),this.constructor.all.set(t,this),M(this,xe,t),this.init(),requestAnimationFrame(()=>{this.afterInit(),this.emit("inited",this)})}get options(){return g(this,ne)}get element(){return g(this,xe)}get events(){return g(this,X)}init(){}afterInit(){}setOptions(t){return t&&Object.assign(g(this,ne),t),g(this,ne)}render(t){this.setOptions(t)}destroy(){this.constructor.all.delete(g(this,xe)),g(this,X)&&(this.emit("destroyed",this),g(this,X).offAll())}on(t,o,n){var r;(r=g(this,X))==null||r.on(t,o,n)}once(t,o,n){var r;(r=g(this,X))==null||r.once(t,o,n)}off(t,o,n){var r;(r=g(this,X))==null||r.off(t,o,n)}emit(t,o){var l;let n=Po.createEvent(t,o);const r=`on${t[0].toUpperCase()}${t.substring(1)}`,s=g(this,ne)[r];return s&&s(n)===!1&&(n.preventDefault(),n.stopPropagation()),n=(l=g(this,X))==null?void 0:l.emit(t,o),n}i18n(t,o,n){return Ne(g(this,ne).i18n,t,o,n,this.options.lang,this.constructor.NAME)??`{i18n:${t}}`}static get NAME(){throw new Error(`static NAME should be override in class ${this.name}`)}static get KEY(){return`zui.${this.NAME}`}static get all(){const t=this.NAME;if(jt.has(t))return jt.get(t);const o=new Map;return jt.set(t,o),o}static getAll(){return this.all}static get(t){return this.all.get(t)}static ensure(t,o){return this.get(t)||new this(t,o)}}ne=new WeakMap,xe=new WeakMap,X=new WeakMap,W(zt,"EVENTS",!1),W(zt,"DEFAULT",{});class Oo extends zt{constructor(){super(...arguments);W(this,"ref",vs())}get $(){return this.ref.current}init(){requestAnimationFrame(()=>this.render())}destroy(){super.destroy(),this.element.innerHTML=""}render(o){const n=this.constructor.Component;Ss(To(n,{ref:this.ref,...this.setOptions(o)}),this.element)}}W(Oo,"Component");var Lt,P,jo,zo,He,Lo,Uo={},Wo=[],Hs=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function fe(e,t){for(var o in t)e[o]=t[o];return e}function Ko(e){var t=e.parentNode;t&&t.removeChild(e)}function Ut(e,t,o){var n,r,s,l={};for(s in t)s=="key"?n=t[s]:s=="ref"?r=t[s]:l[s]=t[s];if(arguments.length>2&&(l.children=arguments.length>3?Lt.call(arguments,2):o),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)l[s]===void 0&&(l[s]=e.defaultProps[s]);return lt(e,l,n,r,null)}function lt(e,t,o,n,r){var s={type:e,props:t,key:o,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r??++jo};return r==null&&P.vnode!=null&&P.vnode(s),s}function Fo(){return{current:null}}function Wt(e){return e.children}function Te(e,t){this.props=e,this.context=t}function Pe(e,t){if(t==null)return e.__?Pe(e.__,e.__.__k.indexOf(e)+1):null;for(var o;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null)return o.__e;return typeof e.type=="function"?Pe(e):null}function Vo(e){var t,o;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null){e.__e=e.__c.base=o.__e;break}return Vo(e)}}function Bo(e){(!e.__d&&(e.__d=!0)&&He.push(e)&&!ct.__r++||Lo!==P.debounceRendering)&&((Lo=P.debounceRendering)||setTimeout)(ct)}function ct(){for(var e;ct.__r=He.length;)e=He.sort(function(t,o){return t.__v.__b-o.__v.__b}),He=[],e.some(function(t){var o,n,r,s,l,c;t.__d&&(l=(s=(o=t).__v).__e,(c=o.__P)&&(n=[],(r=fe({},s)).__v=s.__v+1,Zo(c,s,r,o.__n,c.ownerSVGElement!==void 0,s.__h!=null?[l]:null,n,l??Pe(s),s.__h),Ps(n,s),s.__e!=l&&Vo(s)))})}function Go(e,t,o,n,r,s,l,c,f,d){var i,p,h,a,u,m,_,y=n&&n.__k||Wo,b=y.length;for(o.__k=[],i=0;i<t.length;i++)if((a=o.__k[i]=(a=t[i])==null||typeof a=="boolean"?null:typeof a=="string"||typeof a=="number"||typeof a=="bigint"?lt(null,a,null,null,a):Array.isArray(a)?lt(Wt,{children:a},null,null,null):a.__b>0?lt(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a)!=null){if(a.__=o,a.__b=o.__b+1,(h=y[i])===null||h&&a.key==h.key&&a.type===h.type)y[i]=void 0;else for(p=0;p<b;p++){if((h=y[p])&&a.key==h.key&&a.type===h.type){y[p]=void 0;break}h=null}Zo(e,a,h=h||Uo,r,s,l,c,f,d),u=a.__e,(p=a.ref)&&h.ref!=p&&(_||(_=[]),h.ref&&_.push(h.ref,null,a),_.push(p,a.__c||u,a)),u!=null?(m==null&&(m=u),typeof a.type=="function"&&a.__k===h.__k?a.__d=f=Xo(a,f,e):f=Yo(e,a,h,y,u,f),typeof o.type=="function"&&(o.__d=f)):f&&h.__e==f&&f.parentNode!=e&&(f=Pe(h))}for(o.__e=m,i=b;i--;)y[i]!=null&&tn(y[i],y[i]);if(_)for(i=0;i<_.length;i++)en(_[i],_[++i],_[++i])}function Xo(e,t,o){for(var n,r=e.__k,s=0;r&&s<r.length;s++)(n=r[s])&&(n.__=e,t=typeof n.type=="function"?Xo(n,t,o):Yo(o,n,n,r,n.__e,t));return t}function Yo(e,t,o,n,r,s){var l,c,f;if(t.__d!==void 0)l=t.__d,t.__d=void 0;else if(o==null||r!=s||r.parentNode==null)e:if(s==null||s.parentNode!==e)e.appendChild(r),l=null;else{for(c=s,f=0;(c=c.nextSibling)&&f<n.length;f+=2)if(c==r)break e;e.insertBefore(r,s),l=s}return l!==void 0?l:r.nextSibling}function Ts(e,t,o,n,r){var s;for(s in o)s==="children"||s==="key"||s in t||at(e,s,null,o[s],n);for(s in t)r&&typeof t[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||o[s]===t[s]||at(e,s,t[s],o[s],n)}function qo(e,t,o){t[0]==="-"?e.setProperty(t,o):e[t]=o==null?"":typeof o!="number"||Hs.test(t)?o:o+"px"}function at(e,t,o,n,r){var s;e:if(t==="style")if(typeof o=="string")e.style.cssText=o;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)o&&t in o||qo(e.style,t,"");if(o)for(t in o)n&&o[t]===n[t]||qo(e.style,t,o[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=o,o?n||e.addEventListener(t,s?Qo:Jo,s):e.removeEventListener(t,s?Qo:Jo,s);else if(t!=="dangerouslySetInnerHTML"){if(r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&t.indexOf("-")==-1?e.removeAttribute(t):e.setAttribute(t,o))}}function Jo(e){this.l[e.type+!1](P.event?P.event(e):e)}function Qo(e){this.l[e.type+!0](P.event?P.event(e):e)}function Zo(e,t,o,n,r,s,l,c,f){var d,i,p,h,a,u,m,_,y,b,C,S,j,E,I,v=t.type;if(t.constructor!==void 0)return null;o.__h!=null&&(f=o.__h,c=t.__e=o.__e,t.__h=null,s=[c]),(d=P.__b)&&d(t);try{e:if(typeof v=="function"){if(_=t.props,y=(d=v.contextType)&&n[d.__c],b=d?y?y.props.value:d.__:n,o.__c?m=(i=t.__c=o.__c).__=i.__E:("prototype"in v&&v.prototype.render?t.__c=i=new v(_,b):(t.__c=i=new Te(_,b),i.constructor=v,i.render=js),y&&y.sub(i),i.props=_,i.state||(i.state={}),i.context=b,i.__n=n,p=i.__d=!0,i.__h=[],i._sb=[]),i.__s==null&&(i.__s=i.state),v.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=fe({},i.__s)),fe(i.__s,v.getDerivedStateFromProps(_,i.__s))),h=i.props,a=i.state,p)v.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v.getDerivedStateFromProps==null&&_!==h&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(_,b),!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(_,i.__s,b)===!1||t.__v===o.__v){for(i.props=_,i.state=i.__s,t.__v!==o.__v&&(i.__d=!1),i.__v=t,t.__e=o.__e,t.__k=o.__k,t.__k.forEach(function(w){w&&(w.__=t)}),C=0;C<i._sb.length;C++)i.__h.push(i._sb[C]);i._sb=[],i.__h.length&&l.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(_,i.__s,b),i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(h,a,u)})}if(i.context=b,i.props=_,i.__v=t,i.__P=e,S=P.__r,j=0,"prototype"in v&&v.prototype.render){for(i.state=i.__s,i.__d=!1,S&&S(t),d=i.render(i.props,i.state,i.context),E=0;E<i._sb.length;E++)i.__h.push(i._sb[E]);i._sb=[]}else do i.__d=!1,S&&S(t),d=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++j<25);i.state=i.__s,i.getChildContext!=null&&(n=fe(fe({},n),i.getChildContext())),p||i.getSnapshotBeforeUpdate==null||(u=i.getSnapshotBeforeUpdate(h,a)),I=d!=null&&d.type===Wt&&d.key==null?d.props.children:d,Go(e,Array.isArray(I)?I:[I],t,o,n,r,s,l,c,f),i.base=t.__e,t.__h=null,i.__h.length&&l.push(i),m&&(i.__E=i.__=null),i.__e=!1}else s==null&&t.__v===o.__v?(t.__k=o.__k,t.__e=o.__e):t.__e=Os(o.__e,t,o,n,r,s,l,f);(d=P.diffed)&&d(t)}catch(w){t.__v=null,(f||s!=null)&&(t.__e=c,t.__h=!!f,s[s.indexOf(c)]=null),P.__e(w,t,o)}}function Ps(e,t){P.__c&&P.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(n){n.call(o)})}catch(n){P.__e(n,o.__v)}})}function Os(e,t,o,n,r,s,l,c){var f,d,i,p=o.props,h=t.props,a=t.type,u=0;if(a==="svg"&&(r=!0),s!=null){for(;u<s.length;u++)if((f=s[u])&&"setAttribute"in f==!!a&&(a?f.localName===a:f.nodeType===3)){e=f,s[u]=null;break}}if(e==null){if(a===null)return document.createTextNode(h);e=r?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a,h.is&&h),s=null,c=!1}if(a===null)p===h||c&&e.data===h||(e.data=h);else{if(s=s&&Lt.call(e.childNodes),d=(p=o.props||Uo).dangerouslySetInnerHTML,i=h.dangerouslySetInnerHTML,!c){if(s!=null)for(p={},u=0;u<e.attributes.length;u++)p[e.attributes[u].name]=e.attributes[u].value;(i||d)&&(i&&(d&&i.__html==d.__html||i.__html===e.innerHTML)||(e.innerHTML=i&&i.__html||""))}if(Ts(e,h,p,r,c),i)t.__k=[];else if(u=t.props.children,Go(e,Array.isArray(u)?u:[u],t,o,n,r&&a!=="foreignObject",s,l,s?s[0]:o.__k&&Pe(o,0),c),s!=null)for(u=s.length;u--;)s[u]!=null&&Ko(s[u]);c||("value"in h&&(u=h.value)!==void 0&&(u!==e.value||a==="progress"&&!u||a==="option"&&u!==p.value)&&at(e,"value",u,p.value,!1),"checked"in h&&(u=h.checked)!==void 0&&u!==e.checked&&at(e,"checked",u,p.checked,!1))}return e}function en(e,t,o){try{typeof e=="function"?e(t):e.current=t}catch(n){P.__e(n,o)}}function tn(e,t,o){var n,r;if(P.unmount&&P.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||en(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){P.__e(s,t)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(r=0;r<n.length;r++)n[r]&&tn(n[r],t,o||typeof e.type!="function");o||e.__e==null||Ko(e.__e),e.__=e.__e=e.__d=void 0}function js(e,t,o){return this.constructor(e,o)}Lt=Wo.slice,P={__e:function(e,t,o,n){for(var r,s,l;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),l=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,n||{}),l=r.__d),l)return r.__E=r}catch(c){e=c}throw e}},jo=0,zo=function(e){return e!=null&&e.constructor===void 0},Te.prototype.setState=function(e,t){var o;o=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=fe({},this.state),typeof e=="function"&&(e=e(fe({},o),this.props)),e&&fe(o,e),e!=null&&this.__v&&(t&&this._sb.push(t),Bo(this))},Te.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Bo(this))},Te.prototype.render=Wt,He=[],ct.__r=0;var zs=0;function k(e,t,o,n,r){var s,l,c={};for(l in t)l=="ref"?s=t[l]:c[l]=t[l];var f={type:e,props:c,key:o,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--zs,__source:r,__self:n};if(typeof e=="function"&&(s=e.defaultProps))for(l in s)c[l]===void 0&&(c[l]=s[l]);return P.vnode&&P.vnode(f),f}let Ls=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,o)=>(o&=63,o<36?t+=o.toString(36):o<62?t+=(o-26).toString(36).toUpperCase():o>62?t+="-":t+="_",t),"");function on(...e){const t=[],o=new Map,n=(r,s)=>{if(Array.isArray(r)&&(s=r[1],r=r[0]),!r.length)return;const l=o.get(r);typeof l=="number"?t[l][1]=!!s:(o.set(r,t.length),t.push([r,!!s]))};return e.forEach(r=>{typeof r=="function"&&(r=r()),Array.isArray(r)?on(...r).forEach(n):r&&typeof r=="object"?Object.entries(r).forEach(n):typeof r=="string"&&r.split(" ").forEach(s=>n(s,!0))}),t.sort((r,s)=>(o.get(r[0])||0)-(o.get(s[0])||0))}const G=(...e)=>on(...e).reduce((t,[o,n])=>(n&&t.push(o),t),[]).join(" ");var nn,O,sn,Oe,rn,ln={},cn=[],Us=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function he(e,t){for(var o in t)e[o]=t[o];return e}function an(e){var t=e.parentNode;t&&t.removeChild(e)}function Kt(e,t,o,n,r){var s={type:e,props:t,key:o,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r??++sn};return r==null&&O.vnode!=null&&O.vnode(s),s}function Ft(e){return e.children}function je(e,t){this.props=e,this.context=t}function ze(e,t){if(t==null)return e.__?ze(e.__,e.__.__k.indexOf(e)+1):null;for(var o;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null)return o.__e;return typeof e.type=="function"?ze(e):null}function fn(e){var t,o;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((o=e.__k[t])!=null&&o.__e!=null){e.__e=e.__c.base=o.__e;break}return fn(e)}}function hn(e){(!e.__d&&(e.__d=!0)&&Oe.push(e)&&!ft.__r++||rn!==O.debounceRendering)&&((rn=O.debounceRendering)||setTimeout)(ft)}function ft(){for(var e;ft.__r=Oe.length;)e=Oe.sort(function(t,o){return t.__v.__b-o.__v.__b}),Oe=[],e.some(function(t){var o,n,r,s,l,c;t.__d&&(l=(s=(o=t).__v).__e,(c=o.__P)&&(n=[],(r=he({},s)).__v=s.__v+1,mn(c,s,r,o.__n,c.ownerSVGElement!==void 0,s.__h!=null?[l]:null,n,l??ze(s),s.__h),Ks(n,s),s.__e!=l&&fn(s)))})}function un(e,t,o,n,r,s,l,c,f,d){var i,p,h,a,u,m,_,y=n&&n.__k||cn,b=y.length;for(o.__k=[],i=0;i<t.length;i++)if((a=o.__k[i]=(a=t[i])==null||typeof a=="boolean"?null:typeof a=="string"||typeof a=="number"||typeof a=="bigint"?Kt(null,a,null,null,a):Array.isArray(a)?Kt(Ft,{children:a},null,null,null):a.__b>0?Kt(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a)!=null){if(a.__=o,a.__b=o.__b+1,(h=y[i])===null||h&&a.key==h.key&&a.type===h.type)y[i]=void 0;else for(p=0;p<b;p++){if((h=y[p])&&a.key==h.key&&a.type===h.type){y[p]=void 0;break}h=null}mn(e,a,h=h||ln,r,s,l,c,f,d),u=a.__e,(p=a.ref)&&h.ref!=p&&(_||(_=[]),h.ref&&_.push(h.ref,null,a),_.push(p,a.__c||u,a)),u!=null?(m==null&&(m=u),typeof a.type=="function"&&a.__k===h.__k?a.__d=f=dn(a,f,e):f=pn(e,a,h,y,u,f),typeof o.type=="function"&&(o.__d=f)):f&&h.__e==f&&f.parentNode!=e&&(f=ze(h))}for(o.__e=m,i=b;i--;)y[i]!=null&&wn(y[i],y[i]);if(_)for(i=0;i<_.length;i++)bn(_[i],_[++i],_[++i])}function dn(e,t,o){for(var n,r=e.__k,s=0;r&&s<r.length;s++)(n=r[s])&&(n.__=e,t=typeof n.type=="function"?dn(n,t,o):pn(o,n,n,r,n.__e,t));return t}function pn(e,t,o,n,r,s){var l,c,f;if(t.__d!==void 0)l=t.__d,t.__d=void 0;else if(o==null||r!=s||r.parentNode==null)e:if(s==null||s.parentNode!==e)e.appendChild(r),l=null;else{for(c=s,f=0;(c=c.nextSibling)&&f<n.length;f+=2)if(c==r)break e;e.insertBefore(r,s),l=s}return l!==void 0?l:r.nextSibling}function Ws(e,t,o,n,r){var s;for(s in o)s==="children"||s==="key"||s in t||ht(e,s,null,o[s],n);for(s in t)r&&typeof t[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||o[s]===t[s]||ht(e,s,t[s],o[s],n)}function _n(e,t,o){t[0]==="-"?e.setProperty(t,o):e[t]=o==null?"":typeof o!="number"||Us.test(t)?o:o+"px"}function ht(e,t,o,n,r){var s;e:if(t==="style")if(typeof o=="string")e.style.cssText=o;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)o&&t in o||_n(e.style,t,"");if(o)for(t in o)n&&o[t]===n[t]||_n(e.style,t,o[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=o,o?n||e.addEventListener(t,s?yn:gn,s):e.removeEventListener(t,s?yn:gn,s);else if(t!=="dangerouslySetInnerHTML"){if(r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t in e)try{e[t]=o??"";break e}catch{}typeof o=="function"||(o==null||o===!1&&t.indexOf("-")==-1?e.removeAttribute(t):e.setAttribute(t,o))}}function gn(e){this.l[e.type+!1](O.event?O.event(e):e)}function yn(e){this.l[e.type+!0](O.event?O.event(e):e)}function mn(e,t,o,n,r,s,l,c,f){var d,i,p,h,a,u,m,_,y,b,C,S,j,E,I,v=t.type;if(t.constructor!==void 0)return null;o.__h!=null&&(f=o.__h,c=t.__e=o.__e,t.__h=null,s=[c]),(d=O.__b)&&d(t);try{e:if(typeof v=="function"){if(_=t.props,y=(d=v.contextType)&&n[d.__c],b=d?y?y.props.value:d.__:n,o.__c?m=(i=t.__c=o.__c).__=i.__E:("prototype"in v&&v.prototype.render?t.__c=i=new v(_,b):(t.__c=i=new je(_,b),i.constructor=v,i.render=Vs),y&&y.sub(i),i.props=_,i.state||(i.state={}),i.context=b,i.__n=n,p=i.__d=!0,i.__h=[],i._sb=[]),i.__s==null&&(i.__s=i.state),v.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=he({},i.__s)),he(i.__s,v.getDerivedStateFromProps(_,i.__s))),h=i.props,a=i.state,p)v.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v.getDerivedStateFromProps==null&&_!==h&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(_,b),!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(_,i.__s,b)===!1||t.__v===o.__v){for(i.props=_,i.state=i.__s,t.__v!==o.__v&&(i.__d=!1),i.__v=t,t.__e=o.__e,t.__k=o.__k,t.__k.forEach(function(w){w&&(w.__=t)}),C=0;C<i._sb.length;C++)i.__h.push(i._sb[C]);i._sb=[],i.__h.length&&l.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(_,i.__s,b),i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(h,a,u)})}if(i.context=b,i.props=_,i.__v=t,i.__P=e,S=O.__r,j=0,"prototype"in v&&v.prototype.render){for(i.state=i.__s,i.__d=!1,S&&S(t),d=i.render(i.props,i.state,i.context),E=0;E<i._sb.length;E++)i.__h.push(i._sb[E]);i._sb=[]}else do i.__d=!1,S&&S(t),d=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++j<25);i.state=i.__s,i.getChildContext!=null&&(n=he(he({},n),i.getChildContext())),p||i.getSnapshotBeforeUpdate==null||(u=i.getSnapshotBeforeUpdate(h,a)),I=d!=null&&d.type===Ft&&d.key==null?d.props.children:d,un(e,Array.isArray(I)?I:[I],t,o,n,r,s,l,c,f),i.base=t.__e,t.__h=null,i.__h.length&&l.push(i),m&&(i.__E=i.__=null),i.__e=!1}else s==null&&t.__v===o.__v?(t.__k=o.__k,t.__e=o.__e):t.__e=Fs(o.__e,t,o,n,r,s,l,f);(d=O.diffed)&&d(t)}catch(w){t.__v=null,(f||s!=null)&&(t.__e=c,t.__h=!!f,s[s.indexOf(c)]=null),O.__e(w,t,o)}}function Ks(e,t){O.__c&&O.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(n){n.call(o)})}catch(n){O.__e(n,o.__v)}})}function Fs(e,t,o,n,r,s,l,c){var f,d,i,p=o.props,h=t.props,a=t.type,u=0;if(a==="svg"&&(r=!0),s!=null){for(;u<s.length;u++)if((f=s[u])&&"setAttribute"in f==!!a&&(a?f.localName===a:f.nodeType===3)){e=f,s[u]=null;break}}if(e==null){if(a===null)return document.createTextNode(h);e=r?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a,h.is&&h),s=null,c=!1}if(a===null)p===h||c&&e.data===h||(e.data=h);else{if(s=s&&nn.call(e.childNodes),d=(p=o.props||ln).dangerouslySetInnerHTML,i=h.dangerouslySetInnerHTML,!c){if(s!=null)for(p={},u=0;u<e.attributes.length;u++)p[e.attributes[u].name]=e.attributes[u].value;(i||d)&&(i&&(d&&i.__html==d.__html||i.__html===e.innerHTML)||(e.innerHTML=i&&i.__html||""))}if(Ws(e,h,p,r,c),i)t.__k=[];else if(u=t.props.children,un(e,Array.isArray(u)?u:[u],t,o,n,r&&a!=="foreignObject",s,l,s?s[0]:o.__k&&ze(o,0),c),s!=null)for(u=s.length;u--;)s[u]!=null&&an(s[u]);c||("value"in h&&(u=h.value)!==void 0&&(u!==e.value||a==="progress"&&!u||a==="option"&&u!==p.value)&&ht(e,"value",u,p.value,!1),"checked"in h&&(u=h.checked)!==void 0&&u!==e.checked&&ht(e,"checked",u,p.checked,!1))}return e}function bn(e,t,o){try{typeof e=="function"?e(t):e.current=t}catch(n){O.__e(n,o)}}function wn(e,t,o){var n,r;if(O.unmount&&O.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||bn(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){O.__e(s,t)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(r=0;r<n.length;r++)n[r]&&wn(n[r],t,o||typeof e.type!="function");o||e.__e==null||an(e.__e),e.__=e.__e=e.__d=void 0}function Vs(e,t,o){return this.constructor(e,o)}nn=cn.slice,O={__e:function(e,t,o,n){for(var r,s,l;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),l=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,n||{}),l=r.__d),l)return r.__E=r}catch(c){e=c}throw e}},sn=0,je.prototype.setState=function(e,t){var o;o=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=he({},this.state),typeof e=="function"&&(e=e(he({},o),this.props)),e&&he(o,e),e!=null&&this.__v&&(t&&this._sb.push(t),hn(this))},je.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),hn(this))},je.prototype.render=Ft,Oe=[],ft.__r=0;var Bs=0;function vn(e,t,o,n,r){var s,l,c={};for(l in t)l=="ref"?s=t[l]:c[l]=t[l];var f={type:e,props:c,key:o,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--Bs,__source:r,__self:n};if(typeof e=="function"&&(s=e.defaultProps))for(l in s)c[l]===void 0&&(c[l]=s[l]);return O.vnode&&O.vnode(f),f}const li="";class Cn extends je{constructor(o){super(o);x(this,ye,0);x(this,me,null);W(this,"_handleWheel",o=>{const{wheelContainer:n}=this.props,r=o.target;if(!(!r||!n)&&(typeof n=="string"&&r.closest(n)||typeof n=="object")){const s=(this.props.type==="horz"?o.deltaX:o.deltaY)*(this.props.wheelSpeed??1);this.scrollOffset(s)&&o.preventDefault()}});W(this,"_handleMouseMove",o=>{const{dragStart:n}=this.state;n&&(g(this,ye)&&cancelAnimationFrame(g(this,ye)),M(this,ye,requestAnimationFrame(()=>{const r=this.props.type==="horz"?o.clientX-n.x:o.clientY-n.y;this.scroll(n.offset+r*this.props.scrollSize/this.props.clientSize),M(this,ye,0)})),o.preventDefault())});W(this,"_handleMouseUp",()=>{this.state.dragStart&&this.setState({dragStart:!1})});W(this,"_handleMouseDown",o=>{this.state.dragStart||this.setState({dragStart:{x:o.clientX,y:o.clientY,offset:this.scrollPos}}),o.stopPropagation()});W(this,"_handleClick",o=>{const n=o.currentTarget;if(!n)return;const r=n.getBoundingClientRect(),{type:s,clientSize:l,scrollSize:c}=this.props,f=(s==="horz"?o.clientX-r.left:o.clientY-r.top)-this.barSize/2;this.scroll(f*c/l),o.preventDefault()});this.state={scrollPos:this.props.defaultScrollPos??0,dragStart:!1}}get scrollPos(){return this.props.scrollPos??this.state.scrollPos}get controlled(){return this.props.scrollPos!==void 0}get maxScrollPos(){const{scrollSize:o,clientSize:n}=this.props;return Math.max(0,o-n)}get barSize(){const{clientSize:o,scrollSize:n,size:r=12,minBarSize:s=3*r}=this.props;return Math.max(Math.round(o*o/n),s)}componentDidMount(){document.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp);const{wheelContainer:o}=this.props;o&&(M(this,me,typeof o=="string"?document:o.current),g(this,me).addEventListener("wheel",this._handleWheel,{passive:!1}))}componentWillUnmount(){document.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),g(this,me)&&g(this,me).removeEventListener("wheel",this._handleWheel)}scroll(o){return o=Math.max(0,Math.min(Math.round(o),this.maxScrollPos)),o===this.scrollPos?!1:(this.controlled?this._afterScroll(o):this.setState({scrollPos:o},this._afterScroll.bind(this,o)),!0)}scrollOffset(o){return this.scroll(this.scrollPos+o)}_afterScroll(o){const{onScroll:n}=this.props;n&&n(o,this.props.type??"vert")}render(){const{clientSize:o,type:n,size:r=12,className:s,style:l,left:c,top:f,bottom:d,right:i}=this.props,{maxScrollPos:p,scrollPos:h}=this,{dragStart:a}=this.state,u={left:c,top:f,bottom:d,right:i,...l},m={};return n==="horz"?(u.height=r,u.width=o,m.width=this.barSize,m.left=Math.round(Math.min(p,h)*(o-m.width)/p)):(u.width=r,u.height=o,m.height=this.barSize,m.top=Math.round(Math.min(p,h)*(o-m.height)/p)),vn("div",{className:G("scrollbar",s,{"is-vert":n==="vert","is-horz":n==="horz","is-dragging":a}),style:u,onMouseDown:this._handleClick,children:vn("div",{className:"scrollbar-bar",style:m,onMouseDown:this._handleMouseDown})})}}ye=new WeakMap,me=new WeakMap;function Vt(e,t,o){return e&&(t&&(e=Math.max(t,e)),o&&(e=Math.min(o,e))),e}function xn({col:e,className:t,height:o,row:n,onRenderCell:r,style:s,outerStyle:l,children:c,outerClass:f,...d}){var v;const i={left:e.left,width:e.realWidth,height:o,...l},{align:p,border:h}=e.setting,a={justifyContent:p?p==="left"?"start":p==="right"?"end":p:void 0,...e.setting.cellStyle,...s},u=["dtable-cell",f,e.setting.className,{"has-border-left":h===!0||h==="left","has-border-right":h===!0||h==="right"}],m=["dtable-cell-content",t],_=[c??((v=n.data)==null?void 0:v[e.name])??""],y=r?r(_,{row:n,col:e},Ut):_,b=[],C=[],S={},j={};let E="div";y==null||y.forEach(w=>{if(typeof w=="object"&&w&&!zo(w)&&("html"in w||"className"in w||"style"in w||"attrs"in w||"children"in w||"tagName"in w)){const qe=w.outer?b:C;w.html?qe.push(k("div",{className:G("dtable-cell-html",w.className),style:w.style,dangerouslySetInnerHTML:{__html:w.html},...w.attrs??{}})):(w.style&&Object.assign(w.outer?i:a,w.style),w.className&&(w.outer?u:m).push(w.className),w.children&&qe.push(w.children),w.attrs&&Object.assign(w.outer?S:j,w.attrs)),w.tagName&&!w.outer&&(E=w.tagName)}else C.push(w)});const I=E;return k("div",{className:G(u),style:i,"data-col":e.name,...d,...S,children:[C.length>0&&k(I,{className:G(m),style:a,...j,children:C}),b]})}function Bt({row:e,className:t,top:o=0,left:n=0,width:r,height:s,cols:l,CellComponent:c=xn,onRenderCell:f}){return k("div",{className:G("dtable-cells",t),style:{top:o,left:n,width:r,height:s},children:l.map(d=>d.visible?k(c,{col:d,row:e,onRenderCell:f},d.name):null)})}function kn({row:e,className:t,top:o,height:n,fixedLeftCols:r,fixedRightCols:s,scrollCols:l,fixedLeftWidth:c,scrollWidth:f,scrollColsWidth:d,fixedRightWidth:i,scrollLeft:p,CellComponent:h=xn,onRenderCell:a,style:u,...m}){let _=null;r!=null&&r.length&&(_=k(Bt,{className:"dtable-fixed-left",cols:r,width:c,row:e,CellComponent:h,onRenderCell:a}));let y=null;l!=null&&l.length&&(y=k(Bt,{className:"dtable-flexable",cols:l,left:c-p,width:Math.max(f,d),row:e,CellComponent:h,onRenderCell:a}));let b=null;s!=null&&s.length&&(b=k(Bt,{className:"dtable-fixed-right",cols:s,left:c+f,width:i,row:e,CellComponent:h,onRenderCell:a}));const C={top:o,height:n,lineHeight:`${n-2}px`,...u};return k("div",{className:G("dtable-row",t),style:C,"data-id":e.id,...m,children:[_,y,b]})}function Gs({height:e,onRenderRow:t,...o}){const n={height:e,...o,row:{id:"HEADER",index:-1,top:0},className:"dtable-in-header",top:0};if(t){const r=t({props:n},Ut);r&&Object.assign(n,r)}return k("div",{className:"dtable-header",style:{height:e},children:k(kn,{...n})})}function Xs({className:e,style:t,top:o,rows:n,height:r,rowHeight:s,scrollTop:l,onRenderRow:c,...f}){return t={...t,top:o,height:r},k("div",{className:G("dtable-rows",e),style:t,children:n.map(d=>{const i={className:`dtable-row-${d.index%2?"odd":"even"}`,row:d,top:d.top-l,height:s,...f},p=c==null?void 0:c({props:i,row:d},Ut);return p&&Object.assign(i,p),k(kn,{...i})})})}const ut=new Map,dt=[];function Sn(e,t){const{name:o}=e;if(!(t!=null&&t.override)&&ut.has(o))throw new Error(`DTable: Plugin with name ${o} already exists`);ut.set(o,e),t!=null&&t.buildIn&&!dt.includes(o)&&dt.push(o)}function B(e,t){Sn(e,t);const o=n=>{if(!n)return e;const{defaultOptions:r,...s}=e;return{...s,defaultOptions:{...r,...n}}};return o.plugin=e,o}function Rn(e){return ut.delete(e)}function Ys(e){if(typeof e=="string"){const t=ut.get(e);return t||console.warn(`DTable: Cannot found plugin "${e}"`),t}if(typeof e=="function"&&"plugin"in e)return e.plugin;if(typeof e=="object")return e;console.warn("DTable: Invalid plugin",e)}function En(e,t,o){return t.forEach(n=>{var s;if(!n)return;const r=Ys(n);r&&(o.has(r.name)||((s=r.plugins)!=null&&s.length&&En(e,r.plugins,o),e.push(r),o.add(r.name)))}),e}function qs(e=[],t=!0){return t&&dt.length&&e.unshift(...dt),e!=null&&e.length?En([],e,new Set):[]}function Mn(){return{cols:[],data:[],rowKey:"id",width:"100%",height:"auto",rowHeight:35,defaultColWidth:80,minColWidth:20,maxColWidth:9999,header:!0,footer:!1,headerHeight:0,footerHeight:0,rowHover:!0,colHover:!1,cellHover:!1,bordered:!1,striped:!0,responsive:!1,scrollbarHover:!0,horzScrollbarPos:"outside"}}const ci="";function Js(e){const{tag:t,className:o,style:n,renders:r,generateArgs:s=[],generatorThis:l,generators:c,onGenerate:f,onRenderItem:d,...i}=e,p=[o],h={...n},a=[],u=[];return r.forEach(m=>{const _=[];typeof m=="string"&&c&&c[m]&&(m=c[m]),typeof m=="function"?f?_.push(...f.call(l,m,a,...s)):_.push(...m.call(l,a,...s)??[]):_.push(m),_.forEach(y=>{y!=null&&(typeof y=="object"&&!bo(y)&&("html"in y||"__html"in y||"className"in y||"style"in y||"attrs"in y||"children"in y)?y.html?a.push(To("div",{className:G(y.className),style:y.style,dangerouslySetInnerHTML:{__html:y.html},...y.attrs??{}})):y.__html?u.push(y.__html):(y.style&&Object.assign(h,y.style),y.className&&p.push(y.className),y.children&&a.push(y.children),y.attrs&&Object.assign(i,y.attrs)):a.push(y))})}),u.length&&Object.assign(i,{dangerouslySetInnerHTML:{__html:u}}),[{className:G(p),style:h,...i},a]}function Dn({tag:e="div",...t}){const[o,n]=Js(t);return xo(e,o,...n)}let Qs=(mt=class extends Te{constructor(o){super(o);x(this,bt);x(this,wt);x(this,vt);x(this,Ct);x(this,Be);x(this,Et);x(this,Mt);x(this,Dt);W(this,"ref",Fo());x(this,be,0);x(this,ke,void 0);x(this,ue,!1);x(this,Q,void 0);x(this,de,void 0);x(this,F,[]);x(this,Y,void 0);x(this,Z,new Map);x(this,Se,{});x(this,Fe,void 0);x(this,Ve,[]);W(this,"updateLayout",()=>{g(this,be)&&cancelAnimationFrame(g(this,be)),M(this,be,requestAnimationFrame(()=>{M(this,Y,void 0),this.forceUpdate(),M(this,be,0)}))});x(this,se,(o,n)=>{n=n||o.type;const r=g(this,Z).get(n);if(r!=null&&r.length){for(const s of r)if(s.call(this,o)===!1){o.stopPropagation(),o.preventDefault();break}}});x(this,Re,o=>{g(this,se).call(this,o,`window_${o.type}`)});x(this,Ee,o=>{g(this,se).call(this,o,`document_${o.type}`)});x(this,xt,(o,n)=>{if(this.options.onRenderRow){const r=this.options.onRenderRow.call(this,o,n);r&&Object.assign(o.props,r)}return g(this,F).forEach(r=>{if(r.onRenderRow){const s=r.onRenderRow.call(this,o,n);s&&Object.assign(o.props,s)}}),o.props});x(this,kt,(o,n)=>(this.options.onRenderHeaderRow&&(o.props=this.options.onRenderHeaderRow.call(this,o,n)),g(this,F).forEach(r=>{r.onRenderHeaderRow&&(o.props=r.onRenderHeaderRow.call(this,o,n))}),o.props));x(this,Ge,(o,n,r)=>{const{row:s,col:l}=n;o[0]=this.getCellValue(s,l);const c=s.id==="HEADER"?"onRenderHeaderCell":"onRenderCell";return l.setting[c]&&(o=l.setting[c].call(this,o,n,r)),this.options[c]&&(o=this.options[c].call(this,o,n,r)),g(this,F).forEach(f=>{f[c]&&(o=f[c].call(this,o,n,r))}),o});x(this,Xe,(o,n)=>{n==="horz"?this.scroll({scrollLeft:o}):this.scroll({scrollTop:o})});x(this,St,o=>{var c,f,d,i,p;const n=this.getPointerInfo(o);if(!n)return;const{rowID:r,colName:s,cellElement:l}=n;if(r==="HEADER")l&&((c=this.options.onHeaderCellClick)==null||c.call(this,o,{colName:s,element:l}),g(this,F).forEach(h=>{var a;(a=h.onHeaderCellClick)==null||a.call(this,o,{colName:s,element:l})}));else{const{rowElement:h}=n,a=this.layout.visibleRows.find(u=>u.id===r);if(l){if(((f=this.options.onCellClick)==null?void 0:f.call(this,o,{colName:s,rowID:r,rowInfo:a,element:l,rowElement:h}))===!0)return;for(const u of g(this,F))if(((d=u.onCellClick)==null?void 0:d.call(this,o,{colName:s,rowID:r,rowInfo:a,element:l,rowElement:h}))===!0)return}if(((i=this.options.onRowClick)==null?void 0:i.call(this,o,{rowID:r,rowInfo:a,element:h}))===!0)return;for(const u of g(this,F))if(((p=u.onRowClick)==null?void 0:p.call(this,o,{rowID:r,rowInfo:a,element:h}))===!0)return}});x(this,Rt,o=>{const n=o.key.toLowerCase();if(["pageup","pagedown","home","end"].includes(n))return!this.scroll({to:n.replace("page","")})});M(this,ke,o.id??`dtable-${Ls(10)}`),this.state={scrollTop:0,scrollLeft:0,renderCount:0},M(this,de,Object.freeze(qs(o.plugins))),g(this,de).forEach(n=>{var c;const{methods:r,data:s,state:l}=n;r&&Object.entries(r).forEach(([f,d])=>{typeof d=="function"&&Object.assign(this,{[f]:d.bind(this)})}),s&&Object.assign(g(this,Se),s.call(this)),l&&Object.assign(this.state,l.call(this)),(c=n.onCreate)==null||c.call(this,n)})}get options(){var o;return((o=g(this,Y))==null?void 0:o.options)||g(this,Q)||Mn()}get plugins(){return g(this,F)}get layout(){return g(this,Y)}get id(){return g(this,ke)}get data(){return g(this,Se)}get parent(){var o;return this.props.parent??((o=this.ref.current)==null?void 0:o.parentElement)}componentWillReceiveProps(){M(this,Q,void 0)}componentDidMount(){if(g(this,ue)?this.forceUpdate():V(this,Be,yo).call(this),g(this,F).forEach(o=>{let{events:n}=o;n&&(typeof n=="function"&&(n=n.call(this)),Object.entries(n).forEach(([r,s])=>{s&&this.on(r,s)}))}),this.on("click",g(this,St)),this.on("keydown",g(this,Rt)),this.options.responsive){if(typeof ResizeObserver<"u"){const{parent:o}=this;if(o){const n=new ResizeObserver(this.updateLayout);n.observe(o),M(this,Fe,n)}}this.on("window_resize",this.updateLayout)}g(this,F).forEach(o=>{var n;(n=o.onMounted)==null||n.call(this)})}componentDidUpdate(){g(this,ue)?V(this,Be,yo).call(this):g(this,F).forEach(o=>{var n;(n=o.onUpdated)==null||n.call(this)})}componentWillUnmount(){var n;(n=g(this,Fe))==null||n.disconnect();const{current:o}=this.ref;if(o)for(const r of g(this,Z).keys())r.startsWith("window_")?window.removeEventListener(r.replace("window_",""),g(this,Re)):r.startsWith("document_")?document.removeEventListener(r.replace("document_",""),g(this,Ee)):o.removeEventListener(r,g(this,se));g(this,F).forEach(r=>{var s;(s=r.onUnmounted)==null||s.call(this)}),g(this,de).forEach(r=>{var s;(s=r.onDestory)==null||s.call(this)}),M(this,Se,{}),g(this,Z).clear()}on(o,n,r){var l;r&&(o=`${r}_${o}`);const s=g(this,Z).get(o);s?s.push(n):(g(this,Z).set(o,[n]),o.startsWith("window_")?window.addEventListener(o.replace("window_",""),g(this,Re)):o.startsWith("document_")?document.addEventListener(o.replace("document_",""),g(this,Ee)):(l=this.ref.current)==null||l.addEventListener(o,g(this,se)))}off(o,n,r){var c;r&&(o=`${r}_${o}`);const s=g(this,Z).get(o);if(!s)return;const l=s.indexOf(n);l>=0&&s.splice(l,1),s.length||(g(this,Z).delete(o),o.startsWith("window_")?window.removeEventListener(o.replace("window_",""),g(this,Re)):o.startsWith("document_")?document.removeEventListener(o.replace("document_",""),g(this,Ee)):(c=this.ref.current)==null||c.removeEventListener(o,g(this,se)))}emitCustomEvent(o,n){g(this,se).call(this,n instanceof Event?n:new CustomEvent(o,{detail:n}),o)}scroll(o,n){const{scrollLeft:r,scrollTop:s,rowsHeightTotal:l,rowsHeight:c,rowHeight:f,colsInfo:{scrollWidth:d,scrollColsWidth:i}}=this.layout,{to:p}=o;let{scrollLeft:h,scrollTop:a}=o;if(p==="up"||p==="down")a=s+(p==="down"?1:-1)*Math.floor(c/f)*f;else if(p==="left"||p==="right")h=r+(p==="right"?1:-1)*d;else if(p==="home")a=0;else if(p==="end")a=l-c;else if(p==="left-begin")h=0;else if(p==="right-end")h=i-d;else{const{offsetLeft:m,offsetTop:_}=o;typeof m=="number"&&(h=r+m),typeof _=="number"&&(h=s+_)}const u={};return typeof h=="number"&&(h=Math.max(0,Math.min(h,i-d)),h!==r&&(u.scrollLeft=h)),typeof a=="number"&&(a=Math.max(0,Math.min(a,l-c)),a!==s&&(u.scrollTop=a)),Object.keys(u).length?(this.setState(u,()=>{var m;(m=this.options.onScroll)==null||m.call(this,u),n==null||n.call(this,!0)}),!0):(n==null||n.call(this,!1),!1)}getColInfo(o){if(o===void 0)return;if(typeof o=="object")return o;const{colsMap:n,colsList:r}=this.layout;return typeof o=="number"?r[o]:n[o]}getRowInfo(o){if(o===void 0)return;if(typeof o=="object")return o;if(o===-1||o==="HEADER")return{id:"HEADER",index:-1,top:0};const{rows:n,rowsMap:r}=this.layout;return typeof o=="number"?n[o]:r[o]}getCellValue(o,n){var f;const r=typeof o=="object"?o:this.getRowInfo(o);if(!r)return;const s=typeof n=="object"?n:this.getColInfo(n);if(!s)return;let l=r.id==="HEADER"?s.setting.title:(f=r.data)==null?void 0:f[s.name];const{cellValueGetter:c}=this.options;return c&&(l=c.call(this,r,s,l)),l}getRowInfoByIndex(o){return this.layout.rows[o]}update(o={},n){if(!g(this,Q))return;typeof o=="function"&&(n=o,o={});const{dirtyType:r,state:s}=o;if(r==="layout")M(this,Y,void 0);else if(r==="options"){if(M(this,Q,void 0),!g(this,Y))return;M(this,Y,void 0)}this.setState(s??(l=>({renderCount:l.renderCount+1})),n)}getPointerInfo(o){const n=o.target;if(!n||n.closest(".no-cell-event"))return;const r=n.closest(".dtable-cell");if(!r)return;const s=r.closest(".dtable-row");if(!s)return;const l=r==null?void 0:r.getAttribute("data-col"),c=s==null?void 0:s.getAttribute("data-id");if(!(typeof l!="string"||typeof c!="string"))return{cellElement:r,rowElement:s,colName:l,rowID:c,target:n}}i18n(o,n,r){return Ne(g(this,Ve),o,n,r,this.options.lang)??`{i18n:${o}}`}render(){const o=V(this,Dt,bs).call(this),{className:n,rowHover:r,colHover:s,cellHover:l,bordered:c,striped:f,scrollbarHover:d}=this.options,i={width:o==null?void 0:o.width,height:o==null?void 0:o.height},p=["dtable",n,{"dtable-hover-row":r,"dtable-hover-col":s,"dtable-hover-cell":l,"dtable-bordered":c,"dtable-striped":f,"dtable-scrolled-down":((o==null?void 0:o.scrollTop)??0)>0,"scrollbar-hover":d}],h=[];return o&&g(this,F).forEach(a=>{var m;const u=(m=a.onRender)==null?void 0:m.call(this,o);u&&(u.style&&Object.assign(i,u.style),u.className&&p.push(u.className),u.children&&h.push(u.children))}),k("div",{id:g(this,ke),className:G(p),style:i,ref:this.ref,tabIndex:-1,children:[o&&V(this,bt,ds).call(this,o),o&&V(this,wt,ps).call(this,o),o&&V(this,vt,_s).call(this,o),o&&V(this,Ct,gs).call(this,o)]})}},be=new WeakMap,ke=new WeakMap,ue=new WeakMap,Q=new WeakMap,de=new WeakMap,F=new WeakMap,Y=new WeakMap,Z=new WeakMap,Se=new WeakMap,Fe=new WeakMap,Ve=new WeakMap,se=new WeakMap,Re=new WeakMap,Ee=new WeakMap,bt=new WeakSet,ds=function(o){const{header:n,colsInfo:r,headerHeight:s,scrollLeft:l}=o;if(!n)return null;if(n===!0)return k(Gs,{scrollLeft:l,height:s,onRenderCell:g(this,Ge),onRenderRow:g(this,kt),...r});const c=Array.isArray(n)?n:[n];return k(Dn,{className:"dtable-header",style:{height:s},renders:c,generateArgs:[o],generatorThis:this})},wt=new WeakSet,ps=function(o){const{headerHeight:n,rowsHeight:r,visibleRows:s,rowHeight:l,colsInfo:c,scrollLeft:f,scrollTop:d}=o;return k(Xs,{top:n,height:r,rows:s,rowHeight:l,scrollLeft:f,scrollTop:d,onRenderCell:g(this,Ge),onRenderRow:g(this,xt),...c})},vt=new WeakSet,_s=function(o){const{footer:n}=o;if(!n)return null;const r=typeof n=="function"?n.call(this,o):Array.isArray(n)?n:[n];return k(Dn,{className:"dtable-footer",style:{height:o.footerHeight,top:o.rowsHeight+o.headerHeight},renders:r,generateArgs:[o],generatorThis:this,generators:o.footerGenerators})},Ct=new WeakSet,gs=function(o){const n=[],{scrollLeft:r,colsInfo:s,scrollTop:l,rowsHeight:c,rowsHeightTotal:f,footerHeight:d}=o,{scrollColsWidth:i,scrollWidth:p}=s,{scrollbarSize:h=12,horzScrollbarPos:a}=this.options;return i>p&&n.push(k(Cn,{type:"horz",scrollPos:r,scrollSize:i,clientSize:p,onScroll:g(this,Xe),left:s.fixedLeftWidth,bottom:(a==="inside"?0:-h)+d,size:h,wheelContainer:this.ref},"horz")),f>c&&n.push(k(Cn,{type:"vert",scrollPos:l,scrollSize:f,clientSize:c,onScroll:g(this,Xe),right:0,size:h,top:o.headerHeight,wheelContainer:this.ref},"vert")),n.length?n:null},Be=new WeakSet,yo=function(){var o;M(this,ue,!1),(o=this.options.afterRender)==null||o.call(this),g(this,F).forEach(n=>{var r;return(r=n.afterRender)==null?void 0:r.call(this)})},xt=new WeakMap,kt=new WeakMap,Ge=new WeakMap,Xe=new WeakMap,St=new WeakMap,Rt=new WeakMap,Et=new WeakSet,ys=function(){if(g(this,Q))return!1;const n={...Mn(),...g(this,de).reduce((r,s)=>{const{defaultOptions:l}=s;return l&&Object.assign(r,l),r},{}),...this.props};return M(this,Q,n),M(this,F,g(this,de).reduce((r,s)=>{const{when:l,options:c}=s;return(!l||l(n))&&(r.push(s),c&&Object.assign(n,typeof c=="function"?c.call(this,n):c)),r},[])),M(this,Ve,[this.options.i18n,...this.plugins.map(r=>r.i18n)].filter(Boolean)),!0},Mt=new WeakSet,ms=function(){var ls,cs;const{plugins:o}=this;let n=g(this,Q);const r={flex:k("div",{style:"flex:auto"}),divider:k("div",{style:"width:1px;margin:var(--space);background:var(--color-border);height:50%"})};o.forEach(R=>{var ie;const U=(ie=R.beforeLayout)==null?void 0:ie.call(this,n);U&&(n={...n,...U}),Object.assign(r,R.footer)});const{defaultColWidth:s,minColWidth:l,maxColWidth:c}=n,f=[],d=[],i=[],p={},h=[],a=[];let u=0,m=0,_=0;n.cols.forEach(R=>{if(R.hidden)return;const{name:U,type:ie="",fixed:le=!1,flex:ve=!1,width:Qe=s,minWidth:Ze=l,maxWidth:_o=c,...si}=R,H={name:U,type:ie,setting:{name:U,type:ie,fixed:le,flex:ve,width:Qe,minWidth:Ze,maxWidth:_o,...si},flex:le?0:ve===!0?1:typeof ve=="number"?ve:0,left:0,width:Vt(Qe,Ze,_o),realWidth:0,visible:!0,index:h.length};o.forEach(as=>{var fs,hs;const It=(fs=as.colTypes)==null?void 0:fs[ie];if(It){const us=typeof It=="function"?It(H):It;us&&Object.assign(H.setting,us)}(hs=as.onAddCol)==null||hs.call(this,H)}),H.width=Vt(H.setting.width??H.width,H.setting.minWidth??Ze,H.setting.maxWidth??_o),H.realWidth=H.realWidth||H.width,le==="left"?(H.left=u,u+=H.width,f.push(H)):le==="right"?(H.left=m,m+=H.width,d.push(H)):(H.left=_,_+=H.width,i.push(H)),H.flex&&a.push(H),h.push(H),p[H.name]=H});let y=n.width,b=0;const C=u+_+m;if(typeof y=="function"&&(y=y.call(this,C)),y==="auto")b=C;else if(y==="100%"){const{parent:R}=this;if(R)b=R.clientWidth;else{b=0,M(this,ue,!0);return}}else b=y??0;const{data:S,rowKey:j="id",rowHeight:E}=n,I=[],v=(R,U,ie)=>{var ve,Qe;const le={data:ie??{[j]:R},id:R,index:I.length,top:0};if(ie||(le.lazy=!0),I.push(le),((ve=n.onAddRow)==null?void 0:ve.call(this,le,U))!==!1){for(const Ze of o)if(((Qe=Ze.onAddRow)==null?void 0:Qe.call(this,le,U))===!1)return}};if(typeof S=="number")for(let R=0;R<S;R++)v(`${R}`,R);else Array.isArray(S)&&S.forEach((R,U)=>{typeof R=="object"?v(`${R[j]??""}`,U,R):v(`${R??""}`,U)});let w=I;const qe={};if(n.onAddRows){const R=n.onAddRows.call(this,w);R&&(w=R)}for(const R of o){const U=(ls=R.onAddRows)==null?void 0:ls.call(this,w);U&&(w=U)}w.forEach((R,U)=>{qe[R.id]=R,R.index=U,R.top=R.index*E});const{header:ns,footer:ss}=n,ho=ns?n.headerHeight||E:0,uo=ss?n.footerHeight||E:0;let re=n.height,we=0;const rs=w.length*E,po=ho+uo+rs;if(typeof re=="function"&&(re=re.call(this,po)),re==="auto")we=po;else if(typeof re=="object")we=Math.min(re.max,Math.max(re.min,po));else if(re==="100%"){const{parent:R}=this;if(R)we=R.clientHeight;else{we=0,M(this,ue,!0);return}}else we=re;const oi=we-ho-uo,ni=b-u-m,Je={options:n,allRows:I,width:b,height:we,rows:w,rowsMap:qe,rowHeight:E,rowsHeight:oi,rowsHeightTotal:rs,header:ns,footer:ss,footerGenerators:r,headerHeight:ho,footerHeight:uo,colsMap:p,colsList:h,flexCols:a,colsInfo:{fixedLeftCols:f,fixedRightCols:d,scrollCols:i,fixedLeftWidth:u,scrollWidth:ni,scrollColsWidth:_,fixedRightWidth:m}},is=(cs=n.onLayout)==null?void 0:cs.call(this,Je);is&&Object.assign(Je,is),o.forEach(R=>{if(R.onLayout){const U=R.onLayout.call(this,Je);U&&Object.assign(Je,U)}}),M(this,Y,Je)},Dt=new WeakSet,bs=function(){(V(this,Et,ys).call(this)||!g(this,Y))&&V(this,Mt,ms).call(this);const{layout:o}=this;if(!o)return;let{scrollLeft:n}=this.state;const{flexCols:r,colsInfo:{scrollCols:s,scrollWidth:l,scrollColsWidth:c}}=o;if(r.length){const C=l-c;if(C>0){const S=r.reduce((E,I)=>E+I.flex,0);let j=0;r.forEach(E=>{const I=Math.min(C-j,Math.ceil(C*(E.flex/S)));E.realWidth=I+E.width,j+=E.realWidth})}else r.forEach(S=>{S.realWidth=S.width})}n=Math.min(Math.max(0,c-l),n);let f=0;s.forEach(C=>{C.left=f,f+=C.realWidth,C.visible=C.left+C.realWidth>=n&&C.left<=n+l});const{rowsHeightTotal:d,rowsHeight:i,rows:p,rowHeight:h}=o,a=Math.min(Math.max(0,d-i),this.state.scrollTop),u=Math.floor(a/h),m=a+i,_=Math.min(p.length,Math.ceil(m/h)),y=[],{rowDataGetter:b}=this.options;for(let C=u;C<_;C++){const S=p[C];S.lazy&&b&&(S.data=b([S.id])[0],S.lazy=!1),y.push(S)}return o.visibleRows=y,o.scrollTop=a,o.scrollLeft=n,o},W(mt,"addPlugin",Sn),W(mt,"removePlugin",Rn),mt);function In(e,t){t!==void 0?e.data.hoverCol=t:t=e.data.hoverCol;const{current:o}=e.ref;if(!o)return;const n="dtable-col-hover";o.querySelectorAll(`.${n}`).forEach(r=>r.classList.remove(n)),typeof t=="string"&&t.length&&o.querySelectorAll(`.dtable-cell[data-col="${t}"]`).forEach(r=>r.classList.add(n))}const Zs=B({name:"col-hover",defaultOptions:{colHover:!1},when:e=>!!e.colHover,events:{mouseover(e){var r;const{colHover:t}=this.options;if(!t)return;const o=(r=e.target)==null?void 0:r.closest(".dtable-cell");if(!o||t==="header"&&!o.closest(".dtable-header"))return;const n=(o==null?void 0:o.getAttribute("data-col"))??!1;In(this,n)},mouseleave(){In(this,!1)}}},{buildIn:!0}),fi="";function er(e,t){var l,c;typeof e=="boolean"&&(t=e,e=void 0);const o=this.state.checkedRows,n={},{canRowCheckable:r}=this.options,s=(f,d)=>{r&&!r.call(this,f)||!!o[f]===d||(d?o[f]=!0:delete o[f],n[f]=d)};if(e===void 0?(t===void 0&&(t=!$n.call(this)),(l=this.layout)==null||l.allRows.forEach(({id:f})=>{s(f,!!t)})):(Array.isArray(e)||(e=[e]),e.forEach(f=>{s(f,t??!o[f])})),Object.keys(n).length){const f=(c=this.options.beforeCheckRows)==null?void 0:c.call(this,e,n,o);f&&Object.keys(f).forEach(d=>{f[d]?o[d]=!0:delete o[d]}),this.setState({checkedRows:{...o}},()=>{var d;(d=this.options.onCheckChange)==null||d.call(this,n)})}return n}function tr(e){return this.state.checkedRows[e]??!1}function $n(){var o,n;const e=this.getChecks().length,{canRowCheckable:t}=this.options;return t?e===((o=this.layout)==null?void 0:o.allRows.reduce((r,s)=>r+(t.call(this,s.id)?1:0),0)):e===((n=this.layout)==null?void 0:n.allRows.length)}function or(){return Object.keys(this.state.checkedRows)}const nr=B({name:"checkable",defaultOptions:{checkable:!0},when:e=>!!e.checkable,state(){return{checkedRows:{}}},methods:{toggleCheckRows:er,isRowChecked:tr,isAllRowChecked:$n,getChecks:or},i18n:{zh_cn:{checkedCountInfo:" {selected} ",totalCountInfo:" {total} "},en:{checkedCountInfo:"Selected {selected} items",totalCountInfo:"Total {total} items"}},footer:{checkbox(){const e=this.isAllRowChecked();return[k("div",{style:{padding:"0 calc(3 * var(--space))",display:"flex",alignItems:"center"},onClick:()=>this.toggleCheckRows(),children:k("input",{type:"checkbox",checked:e})})]},checkedInfo(e,t){const o=this.getChecks().length,n=[];return o&&n.push(this.i18n("checkedCountInfo",{selected:o})),n.push(this.i18n("totalCountInfo",{total:t.allRows.length})),[k("div",{children:n.join(", ")})]}},onRenderCell(e,{row:t,col:o}){var c;const{id:n}=t,{canRowCheckable:r}=this.options;if(r&&!r.call(this,n))return e;const{checkbox:s}=o.setting;if(typeof s=="function"?s.call(this,n):s){const f=this.isRowChecked(n),d=((c=this.options.checkboxRender)==null?void 0:c.call(this,f,n))??k("input",{type:"checkbox",checked:f});e.unshift(d),e.push({className:"has-checkbox"})}return e},onRenderHeaderCell(e,{row:t,col:o}){var l;const{id:n}=t,{checkbox:r}=o.setting;if(typeof r=="function"?r.call(this,n):r){const c=this.isAllRowChecked(),f=((l=this.options.checkboxRender)==null?void 0:l.call(this,c,n))??k("input",{type:"checkbox",checked:c});e.unshift(f),e.push({className:"has-checkbox"})}return e},onRenderRow({props:e,row:t}){if(this.isRowChecked(t.id))return{className:G(e.className,"is-checked")}},onHeaderCellClick(e){const t=e.target;if(!t)return;const o=t.closest('input[type="checkbox"],.dtable-checkbox');o&&(this.toggleCheckRows(o.checked),e.stopPropagation())},onRowClick(e,{rowID:t}){const o=e.target;if(!o)return;(o.closest('input[type="checkbox"],.dtable-checkbox')||this.options.checkOnClickRow)&&this.toggleCheckRows(t)}}),ui="",di="";var An=(e=>(e.unknown="",e.collapsed="collapsed",e.expanded="expanded",e.hidden="hidden",e.normal="normal",e))(An||{});function Gt(e){const t=this.data.nestedMap.get(e);if(!t||t.state!=="")return t??{state:"normal",level:-1};if(!t.parent&&!t.children)return t.state="normal",t;const o=this.state.collapsedRows,n=t.children&&o&&o[e];let r=!1,{parent:s}=t;for(;s;){const l=Gt.call(this,s);if(l.state!=="expanded"){r=!0;break}s=l.parent}return t.state=r?"hidden":n?"collapsed":t.children?"expanded":"normal",t.level=t.parent?Gt.call(this,t.parent).level+1:0,t}function sr(e,t){let o=this.state.collapsedRows??{};const{nestedMap:n}=this.data;if(e==="HEADER")if(t===void 0&&(t=!Nn.call(this)),t){const r=n.entries();for(const[s,l]of r)l.state==="expanded"&&(o[s]=!0)}else o={};else{const r=Array.isArray(e)?e:[e];t===void 0&&(t=!o[r[0]]),r.forEach(s=>{const l=n.get(s);t&&(l!=null&&l.children)?o[s]=!0:delete o[s]})}this.update({dirtyType:"layout",state:{collapsedRows:{...o}}},()=>{var r;(r=this.options.onNestedChange)==null||r.call(this)})}function Nn(){const e=this.data.nestedMap.values();for(const t of e)if(t.state==="expanded")return!1;return!0}function Hn(e,t=0,o,n=0){var r;o||(o=[...e.keys()]);for(const s of o){const l=e.get(s);l&&(l.level===n&&(l.order=t++),(r=l.children)!=null&&r.length&&(t=Hn(e,t,l.children,n+1)))}return t}function Tn(e,t,o,n){const r=e.getNestedRowInfo(t);return!r||r.state===""||!r.children||r.children.forEach(s=>{n[s]=o,Tn(e,s,o,n)}),r}function Pn(e,t,o,n,r){var c;const s=e.getNestedRowInfo(t);if(!s||s.state==="")return;((c=s.children)==null?void 0:c.every(f=>{const d=!!(n[f]!==void 0?n[f]:r[f]);return o===d}))&&(n[t]=o),s.parent&&Pn(e,s.parent,o,n,r)}const rr=B({name:"nested",defaultOptions:{nested:!0,nestedParentKey:"parent",asParentKey:"asParent",nestedIndent:20,canSortTo(e,t){const{nestedMap:o}=this.data,n=o.get(e.id),r=o.get(t.id);return(n==null?void 0:n.parent)===(r==null?void 0:r.parent)},beforeCheckRows(e,t,o){if(!this.options.checkable||!(e!=null&&e.length))return;const n={};return Object.entries(t).forEach(([r,s])=>{const l=Tn(this,r,s,n);l!=null&&l.parent&&Pn(this,l.parent,s,n,o)}),n}},when:e=>!!e.nested,data(){return{nestedMap:new Map}},methods:{toggleRow:sr,isAllCollapsed:Nn,getNestedRowInfo:Gt},beforeLayout(){this.data.nestedMap.clear()},onAddRow(e){var r,s;const{nestedMap:t}=this.data,o=(r=e.data)==null?void 0:r[this.options.nestedParentKey??"parent"],n=t.get(e.id)??{state:"",level:0};if(n.parent=o,(s=e.data)!=null&&s[this.options.asParentKey??"asParent"]&&(n.children=[]),t.set(e.id,n),o){let l=t.get(o);l||(l={state:"",level:0},t.set(o,l)),l.children||(l.children=[]),l.children.push(e.id)}},onAddRows(e){return e=e.filter(t=>this.getNestedRowInfo(t.id).state!=="hidden"),Hn(this.data.nestedMap),e.sort((t,o)=>{const n=this.getNestedRowInfo(t.id),r=this.getNestedRowInfo(o.id),s=(n.order??0)-(r.order??0);return s===0?t.index-o.index:s}),e},onRenderCell(e,{col:t,row:o}){var c;const{id:n,data:r}=o,{nestedToggle:s}=t.setting,l=this.getNestedRowInfo(n);if(s&&(l.children||l.parent)&&e.unshift(((c=this.options.onRenderNestedToggle)==null?void 0:c.call(this,l,n,t,r))??k("a",{role:"button",className:`dtable-nested-toggle state${l.children?"":" is-no-child"}`,children:k("span",{className:"toggle-icon"})})),l.level){let{nestedIndent:f=s}=t.setting;f&&(f===!0&&(f=this.options.nestedIndent??12),e.unshift(k("div",{className:"dtable-nested-indent",style:{width:f*l.level+"px"}})))}return e},onRenderHeaderCell(e,{row:t,col:o}){var r;const{id:n}=t;return o.setting.nestedToggle&&e.unshift(((r=this.options.onRenderNestedToggle)==null?void 0:r.call(this,void 0,n,o,void 0))??k("a",{type:"button",className:"dtable-nested-toggle state",children:k("span",{className:"toggle-icon"})})),e},onRenderRow({props:e,row:t}){const o=this.getNestedRowInfo(t.id);return{className:G(e.className,`is-${o.state}`),"data-parent":o.parent}},onRenderHeaderRow({props:e}){return e.className=G(e.className,`is-${this.isAllCollapsed()?"collapsed":"expanded"}`),e},onHeaderCellClick(e){const t=e.target;if(!(!t||!t.closest(".dtable-nested-toggle")))return this.toggleRow("HEADER"),!0},onCellClick(e,{rowID:t}){const o=e.target;if(!(!o||!this.getNestedRowInfo(t).children||!o.closest(".dtable-nested-toggle")))return this.toggleRow(t),!0}}),ir=e=>e?(e instanceof Date||(typeof e=="string"&&(e=e.trim(),/^\d+$/.test(e)&&(e=Number.parseInt(e,10))),typeof e=="number"&&e<1e10&&(e*=1e3),e=new Date(e)),e):new Date,lr=(e,t="yyyy-MM-dd hh:mm")=>{e=ir(e);const o={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"H+":e.getHours()%12,"m+":e.getMinutes(),"s+":e.getSeconds(),"S+":e.getMilliseconds()};return/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,`${e.getFullYear()}`.substring(4-RegExp.$1.length))),Object.keys(o).forEach(n=>{if(new RegExp(`(${n})`).test(t)){const r=`${o[n]}`;t=t.replace(RegExp.$1,RegExp.$1.length===1?r:`00${r}`.substring(r.length))}}),t},_i="",cr=B({name:"rich",colTypes:{html:{onRenderCell(e){return e[0]={html:e[0]},e}},link:{onRenderCell(e,{col:t,row:o}){const{linkTemplate:n="",linkProps:r}=t.setting,s=Ae(n,o.data);return e[0]=k("a",{href:s,...r,children:e[0]}),e}},avatar:{onRenderCell(e,{col:t,row:o}){const{data:n}=o,{avatarWithName:r,avatarClass:s="size-xs circle",avatarKey:l=`${t.name}Avatar`}=t.setting,c=k("div",{className:`avatar ${s} flex-none`,children:k("img",{src:n?n[l]:""})});return r?e.unshift(c):e[0]=c,e}},circleProgress:{align:"center",onRenderCell(e,{col:t}){const{circleSize:o=24,circleBorderSize:n=1,circleBgColor:r="var(--color-border)",circleColor:s="var(--color-success-500)"}=t.setting,l=(o-n)/2,c=o/2,f=e[0];return e[0]=k("svg",{width:o,height:o,children:[k("circle",{cx:c,cy:c,r:l,"stroke-width":n,stroke:r,fill:"transparent"}),k("circle",{cx:c,cy:c,r:l,"stroke-width":n,stroke:s,fill:"transparent","stroke-linecap":"round","stroke-dasharray":Math.PI*l*2,"stroke-dashoffset":Math.PI*l*2*(100-f)/100,style:{transformOrigin:"center",transform:"rotate(-90deg)"}}),k("text",{x:c,y:c+n,"dominant-baseline":"middle","text-anchor":"middle",style:{fontSize:`${l}px`},children:Math.round(f)})]}),e}},actionButtons:{onRenderCell(e,{col:t,row:o}){var c;const n=(c=o.data)==null?void 0:c[t.name];if(!n)return e;const{actionBtnTemplate:r='<button type="button" data-action="{action}" title="{title}" class="{className}"><i class="icon icon-{icon}"></i></button>',actionBtnData:s={},actionBtnClass:l="btn text-primary square size-sm ghost"}=t.setting;return[{html:n.map(f=>{typeof f=="string"&&(f={action:f});const d=s[f.action];return d&&(f={className:l,...d,...f}),Ae(r,f)}).join(" ")}]}},format:{onRenderCell(e,{col:t}){let{format:o}=t.setting;if(!o)return e;typeof o=="string"&&(o={type:"text",format:o});const{format:n,type:r}=o,s=e[0];return typeof n=="function"?e[0]=r==="html"?{html:n(s)}:n(s):r==="datetime"?e[0]=lr(s,n):r==="html"?e[0]={html:Ae(n,s)}:e[0]=Ae(n,s),e}}}},{buildIn:!0}),ar=B({name:"sort-type",onRenderHeaderCell(e,{col:t}){const{sortType:o}=t.setting;if(o){const{sortLink:n=this.options.sortLink,sortAttrs:r}=t.setting,s=o===!0?"none":o;if(e.push(k("div",{className:`dtable-sort dtable-sort-${s}`}),{outer:!0,attrs:{"data-sort":s}}),n){const l=typeof n=="function"?n.call(this,t,s):n;e.push({tagName:"a",attrs:{href:l,...r}})}}return e}},{buildIn:!0}),fr=Object.freeze(Object.defineProperty({__proto__:null,NestedRowState:An,checkable:nr,colHover:Zs,nested:rr,rich:cr,sortType:ar},Symbol.toStringTag,{value:"Module"}));class Ce extends Oo{}W(Ce,"NAME","dtable"),W(Ce,"Component",Qs),W(Ce,"definePlugin",B),W(Ce,"removePlugin",Rn),W(Ce,"plugins",fr),z(Ce,"DTable");function Xt(e,t){return Object.entries(t).reduce((o,[n,r])=>{const s=o[n];return s?r===void 0?delete o[n]:Object.keys(r).forEach(l=>{const c=r[l];c===void 0?delete s[l]:s[l]=c}):r!==void 0&&(o[n]=r),o},e)}function Le(e){return Object.entries(e).reduce((t,[o,n])=>(t&&typeof n=="object"&&(t[o]={...n}),t),{})}const On=B({name:"draft",defaultOptions:{draft:!0,selectAllOnFocus:!0,history:20},when:e=>!!e.draft,state(){return{stagingDraft:{},appliedDraft:{}}},methods:{getCellDraftValue(e,t){const o=this.getRowInfo(e);if(!o)return;const n=this.getColInfo(t);if(!n)return;const{id:r}=o,{name:s}=n,l=this.state.stagingDraft[r];if(l&&s in l)return l[s];const c=this.state.appliedDraft[r];return c&&s in c?c[s]:this.getCellValue(o,n)},getRowDraftData(e,t){const o=this.getRowInfo(e);return o?this.layout.colsList.reduce((n,r)=>{if(!(t!=null&&t.includeIndexCol)&&r.name==="INDEX")return n;const s=this.getCellDraftValue(o,r);return n[r.name]=s===void 0?t==null?void 0:t.emptyCellValue:s,n},{}):{}},getColDraftData(e,t){const o=this.getColInfo(e);return o?this.layout.rows.reduce((n,r)=>{const s=this.getCellDraftValue(r,o);return n[r.id]=s===void 0?t==null?void 0:t.emptyCellValue:s,n},t!=null&&t.includeHeaderRow?{HEADER:this.getCellDraftValue("HEADER",o)}:{}):{}},stageDraft(e,t){var s;const{stagingDraft:o}=this.state;if(((s=this.options.onStageDraft)==null?void 0:s.call(this,e,o))===!1)return;const n=Le(o);Xt(o,e);const r=()=>{var l,c;(l=t==null?void 0:t.callback)==null||l.call(t,e),(c=this.options.afterStageDraft)==null||c.call(this,e,this.state.stagingDraft,n,{skipUpdate:!!(t!=null&&t.skipUpdate)})};t!=null&&t.skipUpdate?r():this.update(r)},applyDraft(e,t){const{stagingDraft:o,appliedDraft:n}=this.state,r=Le(n);Object.entries(e).forEach(([l,c])=>{const f=o[l];f&&typeof c=="object"&&(c===null?delete o[l]:Object.keys(c).forEach(i=>{f[i]===c[i]&&delete f[i]}),Object.keys(f).length||delete o[l]);const d=n[l];d?c===null?delete n[l]:Object.assign(d,c):c!==null&&(n[l]=c)});const s=()=>{var l,c;(l=t==null?void 0:t.callback)==null||l.call(t,e),(c=this.options.afterApplyDraft)==null||c.call(this,e,this.state.appliedDraft,r)};t!=null&&t.skipUpdate?s():this.forceUpdate(s)},renderDraftCell(e,{col:t,row:o}){let n=this.getCellDraftValue(o,t)??"";return typeof n=="string"&&!n.length&&o.id==="HEADER"&&(n=t.name),e[0]={children:n,attrs:{title:n}},e}},onRenderCell(e,...t){return this.options.skipRenderDraftCell?e:this.renderDraftCell(e,...t)},onRenderHeaderCell(e,...t){return this.options.skipRenderDraftCell?e:this.renderDraftCell(e,...t)}}),bi="";function jn(e,t,o){return e.every(n=>t[n]===o[n])}const hr=B({name:"editable",plugins:[On],defaultOptions:{editable:!0,selectAllOnFocus:!0,history:20,skipRenderDraftCell:!0,emptyCellValue:""},when:e=>!!e.editable,events:{dblclick(e){this.editCell(this.getPointerInfo(e))},click(e){const t=this.getPointerInfo(e);t&&t.cellElement.classList.contains("is-selected")&&this.editCell(t)}},data(){return{editingInputRef:Fo()}},methods:{isCellEditing(e,t){const{editingCell:o}=this.state;return!!o&&o.rowID===e&&o.colName===t},editCell(e){const{editable:t,headerEditable:o}=this.options;e&&(typeof t=="function"&&!t(e.rowID,e.colName)||!o&&e.rowID==="HEADER")&&(e=void 0),this.data.editingInputRef.current=null,this.data.needAutoFocus=!0,this.setState({editingCell:e?{colName:e.colName,rowID:e.rowID}:void 0})},deleteCells(e){const t={},{emptyCellValue:o}=this.options;return e.forEach(n=>{const r=t[n.rowID];r?r[n.colName]=o:t[n.rowID]={[n.colName]:o}}),Object.keys(t).length?(this.stageDraft(t),!0):!1},deleteRows(e,t){Array.isArray(e)||(e=[e]);const o=this.layout.colsList.reduce((p,h)=>(h.name!=="HEADER"&&p.push(h.name),p),[]),n=e.reduce((p,h)=>{const a=this.getRowInfo(h);return a&&a.id!=="HEADER"&&p.push(a),p},[]).sort((p,h)=>p.index-h.index);if(!n.length)return;const r=new Set(n.map(p=>p.index)),s=new Map,l=this.layout.rows,c=l.length,{emptyCellValue:f}=this.options;let d=n[0].index;for(let p=d+1;p<c;p++){if(r.has(p))continue;const h=l[p];s.set(d,this.getRowDraftData(h,{emptyCellValue:f})),d++}const i={};d=n[0].index;for(let p=d;p<c;p++){const h=l[p],a=this.getRowDraftData(h,{emptyCellValue:f}),u=s.get(p)||{};jn(o,a,u)||(i[h.id]=u)}Object.keys(i).length&&this.stageDraft(i,{skipUpdate:t==null?void 0:t.skipUpdate})},deleteCols(e,t){Array.isArray(e)||(e=[e]);const o=e.reduce((p,h)=>{const a=this.getColInfo(h);return a&&a.name!=="INDEX"&&p.push(a),p},[]).sort((p,h)=>p.index-h.index);if(!o.length)return;const n=new Set(o.map(p=>p.index)),r=new Map,{colsList:s}=this.layout,l=s.length,c=this.layout.rows.reduce((p,h)=>(p.push(h.id),p),["HEADER"]),{emptyCellValue:f}=this.options;let d=o[0].index;for(let p=d+1;p<l;p++){if(n.has(p))continue;const h=s[p];r.set(d,this.getColDraftData(h,{emptyCellValue:f,includeHeaderRow:!0})),d++}const i={};d=o[0].index;for(let p=d;p<l;p++){const h=s[p],a=this.getColDraftData(h,{emptyCellValue:f,includeHeaderRow:!0}),u=r.get(p)||{};if(!jn(c,a,u))for(const m of c)i[m]||(i[m]={}),i[m][h.name]=u[m]??f}Object.keys(i).length&&this.stageDraft(i,{skipUpdate:t==null?void 0:t.skipUpdate})},handleEditingInputChange(e){var l,c;const t=(l=e.target)==null?void 0:l.value,{editingCell:o}=this.state;if(typeof t!="string"||!o)return;const{rowID:n,colName:r}=o,s=this.getCellDraftValue(n,r);s!==t&&((c=this.options.onEditCell)==null?void 0:c.call(this,{rowID:n,colName:r,value:t,oldValue:s}))!==!1&&this.stageDraft({[n]:{[r]:t}})},handleEditingInputBlur(){this.editCell()},handleEditingKeyDown(e){var t;e.key==="Enter"?(t=this.data.editingInputRef.current)==null||t.blur():e.key==="Esc"&&this.editCell()},renderEditableCell(e,{col:t,row:o},n){const{id:r}=o;if(this.isCellEditing(r,t.name)){const s=`${this.getCellDraftValue(r,t.name)??""}`;return[{outer:!0,className:"is-editing",children:k("input",{ref:this.data.editingInputRef,class:"dtable-editing-input",type:"text",defaultValue:s,style:{textAlign:t.setting.align},onChange:this.handleEditingInputChange,onBlur:this.handleEditingInputBlur,onKeyDown:this.handleEditingKeyDown,onPaste:this.options.onPasteToCell})}]}return this.renderDraftCell(e,{row:o,col:t},n)}},onUpdated(){const e=this.data.editingInputRef.current;e&&this.data.needAutoFocus&&(this.data.needAutoFocus=!1,e.focus({preventScroll:!0}),this.options.selectAllOnFocus&&e.select())},onRender(){return{className:{"dtable-editable":this.options.editable,"dtable-editing":this.state.editingCell}}},onRenderCell(...e){return this.renderEditableCell(...e)},onRenderHeaderCell(...e){return this.renderEditableCell(...e)}}),Yt=B({name:"mousemove",events:{mousemove(e){this.data.mmRafID&&(cancelAnimationFrame(this.data.mmRafID),this.data.mmRafID=0),this.data.mmRafID=requestAnimationFrame(()=>{this.emitCustomEvent("mousemovesmooth",e)}),e.preventDefault()},document_mousemove(e){this.data.dmmRafID&&(cancelAnimationFrame(this.data.dmmRafID),this.data.dmmRafID=0),this.data.dmmRafID=requestAnimationFrame(()=>{this.emitCustomEvent("document_mousemovesmooth",e)}),e.preventDefault()}}}),Ci="";function zn(e,t,o){const{colResizing:n}=e.state;if(!n)return;const r=Math.round(t.clientX-n.startX);if(!r&&!o)return;const s={};o&&(s.colResizing=void 0);const{colsSizes:l}=e.state,{colName:c}=n;l[n.colName]=n.startSize+r,s.colsSizes={...l},e.update({dirtyType:"layout",state:s},o?()=>{var d;const f=e.getColInfo(c);f&&((d=e.options.onColResize)==null||d.call(e,c,f.realWidth))}:void 0),t.stopPropagation(),t.preventDefault()}const ur=B({name:"resize",defaultOptions:{colResize:!0},when:e=>!!e.colResize,plugins:[Yt],state(){return{colsSizes:{}}},events:{mousedown(e){var n;const t=e.target.closest(".dtable-col-splitter");if(!t)return;const o=(n=t.closest(".dtable-cell"))==null?void 0:n.dataset.col;if(o)return this.setState({colResizing:{colName:o,startSize:this.state.colsSizes[o]??0,startX:e.clientX}}),e.stopPropagation(),!1},dblclick(e){var r;const t=e.target.closest(".dtable-col-splitter");if(!t)return;const o=(r=t.closest(".dtable-cell"))==null?void 0:r.dataset.col;if(!o)return;const{colsSizes:n}=this.state;n[o]&&(delete n[o],this.update({dirtyType:"layout",state:{colResizing:void 0,colsSizes:{...n}}},()=>{var s;(s=this.options.onColResize)==null||s.call(this,o,0)}))},document_mouseup(e){if(this.state.colResizing)return zn(this,e,!0),!1},document_mousemovesmooth(e){if(this.state.colResizing)return zn(this,e),!1}},onRenderHeaderCell(e,{col:t}){var n;const{colResize:o}=this.options;return!t.flex&&(typeof o!="function"||o.call(this,t.name)!==!1)&&(e.push({className:"has-col-splitter",children:k("div",{className:"dtable-col-splitter no-cell-event"}),outer:!0}),((n=this.state.colResizing)==null?void 0:n.colName)===t.name&&e.push({className:"has-col-resizing",outer:!0})),e},onAddCol(e){const t=this.state.colsSizes[e.name];typeof t=="number"&&(e.realWidth=Vt(e.width+t,e.setting.minWidth,e.setting.maxWidth))},onRender(){if(this.state.colResizing)return{className:"has-col-resizing"}}}),ki="",dr=/C(\d+)R(\d+)/i,pr=/(?:C(\d+))?(?:R(\d+))?/i;function Ln(e){const t=dr.exec(e);if(!t||t.length<3)return;const[,o,n]=t;return{col:+o,row:+n}}function qt(e){const t=pr.exec(e);if(!t)return;const[,o=-1,n=-1]=t,r=+o,s=+n;return{col:r,row:s}}function Jt(e){const t=[],o=qt(e);if(!o)return t;const{col:n,row:r}=o;if(n>=0)if(r>=0)t.push({col:n,row:r});else{const s=this.layout.rows.length;for(let l=0;l<s;l++)t.push({col:n,row:l})}else if(r>=0){const{colsInfo:s}=this.layout,l=s.fixedLeftCols.length+s.scrollCols.length+s.fixedRightCols.length;for(let c=0;c<l;c++)t.push({col:c,row:r})}return t}function Un(e){const[t,o]=e.split(":");if(t){if(!o)return Jt.call(this,t)}else return o?Jt.call(this,o):[];const n=qt(t),r=qt(o);if(!n||!r)return[];const s=Math.min(n.col,r.col),l=Math.max(n.col,r.col),c=Math.min(n.row,r.row),f=Math.max(n.row,r.row),d=[],i=Object.keys(this.layout.colsMap).length;for(let p=s;p<=l;p++)if(c<0||f<0){const h=this.layout.rows.length;for(let a=0;a<h;a++)d.push({col:p,row:a})}else for(let h=c;h<=f;h++)if(p<0)for(let a=0;a<i;a++)d.push({col:a,row:h});else d.push({col:p,row:h});return d}function _r(e){return e.reduce((t,o)=>(typeof o=="object"?t.push(o):o.includes(":")?t.push(...Un.call(this,o)):t.push(...Jt.call(this,o)),t),[])}function Qt(e,t){const{col:o,row:n}=e,r=[];if(o>=0&&r.push(`C${o}`),n>=0&&r.push(`R${n}`),t){const s=Qt(t);s&&r.push(":",s)}return r.join("")}function Zt(e,t){const{selectable:o}=e.options;return typeof o=="function"?o.call(e,t):!!o}function eo(e,t={}){var h;Array.isArray(e)||(e=[e]);let o=_r.call(this,e);const n=(h=this.options.beforeSelectCells)==null?void 0:h.call(this,o);n&&(o=n);const{clearBefore:r=!0,deselect:s,selecting:l,callback:c}=t,{selectingMap:f,selectedMap:d}=this.state,i=l?f:d;f.clear(),r&&d.clear();let p=!1;return s?o.forEach(a=>{if(!Zt(this,a))return;const{col:u,row:m}=a,_=i.get(u);_&&(_.delete(m),_.size||i.delete(u)),p=!0}):o.forEach(a=>{if(!Zt(this,a))return;const{col:u,row:m}=a,_=i.get(u);_?_.add(m):i.set(u,new Set([m])),p=!0}),p?(this.update({},()=>{var a;c==null||c.call(this,o),(a=this.options.onSelectCells)==null||a.call(this,o)}),o):[]}function gr(e){const{selectedMap:t}=this.state;let o=-1,n=-1;for(const[r,s]of t.entries()){n=n<0?r:Math.min(r,n);const l=Math.min(...s);o=o<0?l:Math.min(l,o)}if(!(o<0||n<0)&&(e==="down"?o++:e==="up"?o--:e==="left"?n--:n++,o>=0&&n>=0&&o<this.layout.rows.length&&n<this.layout.colsList.length)){const r={col:n,row:o};if(Zt(this,r))return this.scrollTo(r),this.selectCells([r]),r}}function yr(e,t){return eo.call(this,e,{...t,selecting:!0})}function mr(e,t){return eo.call(this,e,{...t,deselect:!0})}function br(){const{colsInfo:e}=this.layout,t=e.fixedLeftCols.length+e.scrollCols.length+e.fixedRightCols.length,o=this.layout.rows.length,{selectedMap:n}=this.state,r=typeof this.options.selectable=="function"?this.options.selectable:!1;for(let s=0;s<t;s++){let l=n.get(s);l||(l=new Set,n.set(s,l));for(let c=0;c<o;c++)r&&!r({row:c,col:s})||l.add(c)}this.forceUpdate()}function wr(){const{selectedMap:e}=this.state;return e.size?(e.clear(),this.forceUpdate(),!0):!1}function vr(e){var o;const t=typeof e=="string"?Ln(e):e;return t?((o=this.state.selectedMap.get(t.col))==null?void 0:o.has(t.row))??!1:!1}function to(e,t){for(const[,o]of e.state.selectedMap.entries())if(o.has(t))return!0;for(const[,o]of e.state.selectingMap.entries())if(o.has(t))return!0;return!1}function Cr(e){var n;const t=(n=this.getRowInfo(e))==null?void 0:n.index;if(typeof t!="number")return!1;const{colsList:o}=this.layout;return o.every(r=>r.name==="INDEX"||this.isCellSelected({col:r.index,row:t}))}function xr(e){var n;const t=(n=this.getColInfo(e))==null?void 0:n.index;if(typeof t!="number")return!1;const{rows:o}=this.layout;return o.every(r=>this.isCellSelected({col:t,row:r.index}))}function Wn(e,t){var o,n;return!!((o=e.state.selectedMap.get(t))!=null&&o.size||(n=e.state.selectingMap.get(t))!=null&&n.size)}function kr(e){var o;const t=typeof e=="string"?Ln(e):e;return t?((o=this.state.selectingMap.get(t.col))==null?void 0:o.has(t.row))??!1:!1}function Sr(){const e=[];for(const[t,o]of this.state.selectedMap.entries())for(const n of o)e.push({col:t,row:n});return e}function Rr(){const e=[];for(const[o,n]of this.state.selectedMap.entries())n.size&&e.push(o);return[...new Set(e)].map(o=>this.getColInfo(o)).filter(o=>o&&this.isColSelected(o)).sort((o,n)=>o.index-n.index)}function Er(){const e=[];for(const[,o]of this.state.selectedMap.entries())e.push(...o);return[...new Set(e)].map(o=>this.getRowInfo(o)).filter(o=>o&&this.isRowSelected(o)).sort((o,n)=>o.index-n.index)}function Mr(){let e=0;for(const t of this.state.selectedMap.values())e+=t.size;return e}function oo(e,t,o){var d,i;const n=e.getPointerInfo(t);if(!n||n.target.closest("input,textarea,[contenteditable]"))return;const{rowID:r,colName:s}=n,l=((d=e.getColInfo(s))==null?void 0:d.index)??-1;if(l<0)return;const c=r==="HEADER";if(c&&(o!=null&&o.ignoreHeaderCell))return;const f=c?-1:((i=e.getRowInfo(r))==null?void 0:i.index)??-1;return{col:l,row:f}}const Dr=B({name:"selectable",defaultOptions:{selectable:!0,markSelectRange:!0},when:e=>!!e.selectable,plugins:[Yt],state(){return{selectedMap:new Map,selectingMap:new Map}},methods:{selectCells:eo,selectNextCell:gr,selectingCells:yr,deselectCells:mr,isCellSelected:vr,isCellSelecting:kr,isRowSelected:Cr,isColSelected:xr,hasCellSelectInRow:to,hasCellSelectInCol:Wn,getSelectedCols:Rr,getSelectedRows:Er,getSelectedCells:Sr,selectAllCells:br,deselectAllCells:wr,getSelectedCellsSize:Mr},events:{mousedown(e){if(this.data.disableSelectable)return;const t=oo(this,e);e.button!==0&&(!t||this.isCellSelected(t)||t.row<0&&this.isColSelected(t.col)||t.col<1&&this.isRowSelected(t.row))||(this.data.selectingStart=t,this.startScrollToMouse(),t&&e.stopPropagation())},document_mouseup(e){const{selectingStart:t}=this.data;if(this.stopScrollToMouse(),!t)return;this.data.selectingStart=void 0;const o=oo(this,e);if(o){const n=Qt(t,o);n&&(this.selectCells(n),e.stopPropagation())}},document_click(e){const t=e.target;if(!t)return;const{ignoreDeselectOn:o}=this.options;t.closest(`#${this.id}${o?`,${o}`:""}`)||this.deselectAllCells()},mousemovesmooth(e){const t=this,{selectingStart:o}=t.data;if(!o)return;const n=oo(t,e);if(!n)return;const r=Qt(o,n);r&&(t.selectingCells(r),e.preventDefault(),e.stopPropagation())}},onRender(){if(this.options.selectable)return{className:"dtable-selectable"}},onRenderRow({props:e,row:t}){if(to(this,t.index))return{className:G(e.className,"has-cell-select",this.isRowSelected(t)?"is-row-selected":"")}},onRenderCell(e,{row:t,col:o}){const n=this.getRowInfo(t.id);if(!n)return e;const r={col:o.index,row:n.index};return this.isCellSelecting(r)?e.push({outer:!0,className:"is-select is-selecting"}):this.isCellSelected(r)&&e.push({outer:!0,className:"is-select is-selected"}),this.options.markSelectRange&&o.name==="INDEX"&&to(this,n.index)&&e.push({outer:!0,className:"has-cell-selected"}),e},onRenderHeaderCell(e,{col:t}){return this.options.markSelectRange&&t.name!=="INDEX"&&Wn(this,t.index)&&(e.push({outer:!0,className:"has-cell-selected"}),this.isColSelected(t)&&e.push({outer:!0,className:"is-col-selected"})),e}});var no=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function so(e,t,o,n){e.addEventListener?e.addEventListener(t,o,n):e.attachEvent&&e.attachEvent("on".concat(t),function(){o(window.event)})}function Kn(e,t){for(var o=t.slice(0,t.length-1),n=0;n<o.length;n++)o[n]=e[o[n].toLowerCase()];return o}function Fn(e){typeof e!="string"&&(e=""),e=e.replace(/\s/g,"");for(var t=e.split(","),o=t.lastIndexOf("");o>=0;)t[o-1]+=",",t.splice(o,1),o=t.lastIndexOf("");return t}function Ir(e,t){for(var o=e.length>=t.length?e:t,n=e.length>=t.length?t:e,r=!0,s=0;s<o.length;s++)n.indexOf(o[s])===-1&&(r=!1);return r}for(var Ue={backspace:8,"":8,tab:9,clear:12,enter:13,"":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":no?173:189,"=":no?61:187,";":no?59:186,"'":222,"[":219,"]":221,"\\":220},q={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},ro={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},K={16:!1,18:!1,17:!1,91:!1},L={},pt=1;pt<20;pt++)Ue["f".concat(pt)]=111+pt;var N=[],Vn=!1,Bn="all",Gn=[],_t=function(t){return Ue[t.toLowerCase()]||q[t.toLowerCase()]||t.toUpperCase().charCodeAt(0)},$r=function(t){return Object.keys(Ue).find(function(o){return Ue[o]===t})},Ar=function(t){return Object.keys(q).find(function(o){return q[o]===t})};function Xn(e){Bn=e||"all"}function We(){return Bn||"all"}function Nr(){return N.slice(0)}function Hr(){return N.map(function(e){return $r(e)||Ar(e)||String.fromCharCode(e)})}function Tr(e){var t=e.target||e.srcElement,o=t.tagName,n=!0;return(t.isContentEditable||(o==="INPUT"||o==="TEXTAREA"||o==="SELECT")&&!t.readOnly)&&(n=!1),n}function Pr(e){return typeof e=="string"&&(e=_t(e)),N.indexOf(e)!==-1}function Or(e,t){var o,n;e||(e=We());for(var r in L)if(Object.prototype.hasOwnProperty.call(L,r))for(o=L[r],n=0;n<o.length;)o[n].scope===e?o.splice(n,1):n++;We()===e&&Xn(t||"all")}function jr(e){var t=e.keyCode||e.which||e.charCode,o=N.indexOf(t);if(o>=0&&N.splice(o,1),e.key&&e.key.toLowerCase()==="meta"&&N.splice(0,N.length),(t===93||t===224)&&(t=91),t in K){K[t]=!1;for(var n in q)q[n]===t&&(J[n]=!1)}}function zr(e){if(typeof e>"u")Object.keys(L).forEach(function(l){return delete L[l]});else if(Array.isArray(e))e.forEach(function(l){l.key&&io(l)});else if(typeof e=="object")e.key&&io(e);else if(typeof e=="string"){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];var r=o[0],s=o[1];typeof r=="function"&&(s=r,r=""),io({key:e,scope:r,method:s,splitKey:"+"})}}var io=function(t){var o=t.key,n=t.scope,r=t.method,s=t.splitKey,l=s===void 0?"+":s,c=Fn(o);c.forEach(function(f){var d=f.split(l),i=d.length,p=d[i-1],h=p==="*"?"*":_t(p);if(L[h]){n||(n=We());var a=i>1?Kn(q,d):[];L[h]=L[h].filter(function(u){var m=r?u.method===r:!0;return!(m&&u.scope===n&&Ir(u.mods,a))})}})};function Yn(e,t,o,n){if(t.element===n){var r;if(t.scope===o||t.scope==="all"){r=t.mods.length>0;for(var s in K)Object.prototype.hasOwnProperty.call(K,s)&&(!K[s]&&t.mods.indexOf(+s)>-1||K[s]&&t.mods.indexOf(+s)===-1)&&(r=!1);(t.mods.length===0&&!K[16]&&!K[18]&&!K[17]&&!K[91]||r||t.shortcut==="*")&&t.method(e,t)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}}function qn(e,t){var o=L["*"],n=e.keyCode||e.which||e.charCode;if(J.filter.call(this,e)){if((n===93||n===224)&&(n=91),N.indexOf(n)===-1&&n!==229&&N.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(u){var m=ro[u];e[u]&&N.indexOf(m)===-1?N.push(m):!e[u]&&N.indexOf(m)>-1?N.splice(N.indexOf(m),1):u==="metaKey"&&e[u]&&N.length===3&&(e.ctrlKey||e.shiftKey||e.altKey||(N=N.slice(N.indexOf(m))))}),n in K){K[n]=!0;for(var r in q)q[r]===n&&(J[r]=!0);if(!o)return}for(var s in K)Object.prototype.hasOwnProperty.call(K,s)&&(K[s]=e[ro[s]]);e.getModifierState&&!(e.altKey&&!e.ctrlKey)&&e.getModifierState("AltGraph")&&(N.indexOf(17)===-1&&N.push(17),N.indexOf(18)===-1&&N.push(18),K[17]=!0,K[18]=!0);var l=We();if(o)for(var c=0;c<o.length;c++)o[c].scope===l&&(e.type==="keydown"&&o[c].keydown||e.type==="keyup"&&o[c].keyup)&&Yn(e,o[c],l,t);if(n in L){for(var f=0;f<L[n].length;f++)if((e.type==="keydown"&&L[n][f].keydown||e.type==="keyup"&&L[n][f].keyup)&&L[n][f].key){for(var d=L[n][f],i=d.splitKey,p=d.key.split(i),h=[],a=0;a<p.length;a++)h.push(_t(p[a]));h.sort().join("")===N.sort().join("")&&Yn(e,d,l,t)}}}}function Lr(e){return Gn.indexOf(e)>-1}function J(e,t,o){N=[];var n=Fn(e),r=[],s="all",l=document,c=0,f=!1,d=!0,i="+",p=!1;for(o===void 0&&typeof t=="function"&&(o=t),Object.prototype.toString.call(t)==="[object Object]"&&(t.scope&&(s=t.scope),t.element&&(l=t.element),t.keyup&&(f=t.keyup),t.keydown!==void 0&&(d=t.keydown),t.capture!==void 0&&(p=t.capture),typeof t.splitKey=="string"&&(i=t.splitKey)),typeof t=="string"&&(s=t);c<n.length;c++)e=n[c].split(i),r=[],e.length>1&&(r=Kn(q,e)),e=e[e.length-1],e=e==="*"?"*":_t(e),e in L||(L[e]=[]),L[e].push({keyup:f,keydown:d,scope:s,mods:r,shortcut:n[c],method:o,key:n[c],splitKey:i,element:l});typeof l<"u"&&!Lr(l)&&window&&(Gn.push(l),so(l,"keydown",function(h){qn(h,l)},p),Vn||(Vn=!0,so(window,"focus",function(){N=[]},p)),so(l,"keyup",function(h){qn(h,l),jr(h)},p))}function Ur(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(L).forEach(function(o){var n=L[o].find(function(r){return r.scope===t&&r.shortcut===e});n&&n.method&&n.method()})}var lo={getPressedKeyString:Hr,setScope:Xn,getScope:We,deleteScope:Or,getPressedKeyCodes:Nr,isPressed:Pr,filter:Tr,trigger:Ur,unbind:zr,keyMap:Ue,modifier:q,modifierMap:ro};for(var co in lo)Object.prototype.hasOwnProperty.call(lo,co)&&(J[co]=lo[co]);if(typeof window<"u"){var Wr=window.hotkeys;J.noConflict=function(e){return e&&window.hotkeys===J&&(window.hotkeys=Wr),J},window.hotkeys=J}const Kr=B({name:"hotkey",data(){return{hotkeys:new Map}},when:e=>!!e.hotkeys,methods:{hotkeyHandler(e,t){var o;(o=this.data.hotkeys.get(t.key))==null||o.call(this,e,t)}},onMounted(){const{hotkeys:e}=this.options;if(!e)return;const t=new Map;Object.keys(e).forEach(n=>{const r=e[n];n.split(",").forEach(s=>{s=s.trim(),s.length&&t.set(s,r)})});const o=[...t.keys()];o.length&&(this.data.keys=o.join(","),J(this.data.keys,{element:this.ref.current},this.hotkeyHandler),this.data.hotkeys=t)},onUnmounted(){this.data.keys&&J.unbind(this.data.keys,this.hotkeyHandler)}});let Fr=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,o)=>(o&=63,o<36?t+=o.toString(36):o<62?t+=(o-26).toString(36).toUpperCase():o>62?t+="-":t+="_",t),"");const fo=class{constructor(t,o="local"){x(this,De);x(this,Ye,void 0);x(this,pe,void 0);x(this,ee,void 0);x(this,Me,void 0);M(this,Ye,o),M(this,pe,`ZUI_STORE:${t??Fr()}`),M(this,ee,o==="local"?localStorage:sessionStorage)}get type(){return g(this,Ye)}get session(){return this.type==="session"?this:(g(this,Me)||M(this,Me,new fo(g(this,pe),"session")),g(this,Me))}get(t,o){const n=g(this,ee).getItem(V(this,De,$t).call(this,t));return typeof n=="string"?JSON.parse(n):n??o}set(t,o){if(o==null)return this.remove(t);g(this,ee).setItem(V(this,De,$t).call(this,t),JSON.stringify(o))}remove(t){g(this,ee).removeItem(V(this,De,$t).call(this,t))}each(t){for(let o=0;o<g(this,ee).length;o++){const n=g(this,ee).key(o);if(n!=null&&n.startsWith(g(this,pe))){const r=g(this,ee).getItem(n);typeof r=="string"&&t(n.substring(g(this,pe).length+1),JSON.parse(r))}}}getAll(){const t={};return this.each((o,n)=>{t[o]=n}),t}};let ao=fo;Ye=new WeakMap,pe=new WeakMap,ee=new WeakMap,Me=new WeakMap,De=new WeakSet,$t=function(t){return`${g(this,pe)}:${t}`};const Vr=B({name:"store",defaultOptions:{store:!0},when:e=>!!e.store,data(){return{store:new ao(this.id)}}});function gt(e,t){const o=new Set([...Object.keys(e),...Object.keys(t)]);return Array.from(o).reduce((n,r)=>{const s=e[r]||{},l=t[r]||{};if(s===l)return n;const c=new Set([...Object.keys(s),...Object.keys(l)]),f={};let d=!1;return c.forEach(i=>{const p=s[i],h=l[i];p!==h&&(f[i]=p,d=!0)}),d&&(n[r]=f),n},{})}const Br=B({name:"history",plugins:[Vr,On],defaultOptions:{history:!0,historyTarget:"staging",historyThreshold:10},when:e=>!!e.history,options(e){const{afterApplyDraft:t,afterStageDraft:o,historyTarget:n,history:r}=e;return{afterApplyDraft:r&&n==="applied"?(s,l,c)=>{t&&t.call(this,s,l,c),this.addHistory({after:gt(l,c),before:gt(c,l)})}:t,afterStageDraft:r&&n!=="applied"?(s,l,c,f)=>{o&&o.call(this,s,l,c,f),this.addHistory({after:gt(l,c),before:gt(c,l)})}:o}},data(){return{historyIdx:1}},state(){return{historyCursor:0,historyItems:[]}},methods:{addHistory(e){let{historyCursor:t,historyItems:o}=this.state;t>0&&(o.splice(0,t).forEach(s=>{typeof s=="number"&&this.data.store.session.remove(`HISTORY:${this.id}:${s}`)}),t=0),o=[e,...o];const{historyThreshold:n}=this.options;if(n&&o.length>n)for(let r=n;r<o.length;r++){const s=o[r];if(typeof s=="number")break;const l=this.data.historyIdx++;this.data.store.session.set(`HISTORY:${this.id}:${l}`,s),o[r]=l}this.setState({historyCursor:t,historyItems:o})},getHistory(e){if(typeof e=="object")return e;const{historyCursor:t,historyItems:o}=this.state;e===void 0&&(e=t);const n=o[e];return typeof n=="number"?this.data.store.session.get(`HISTORY:${this.id}:${n}`):n},applyHistory(e,t,o){const n={historyCursor:e},r=this.options.historyTarget==="applied",{appliedDraft:s,stagingDraft:l}=this.state,c=Le((r?s:l)??{});r?n.appliedDraft=Xt(s,t):n.stagingDraft=Xt(l,t),this.setState(n,()=>{var d;o==null||o();const f=Object.entries(t).reduce((i,[p,h])=>{if(h){const a={};Object.entries(h).forEach(([u,m])=>{a[u]=m===void 0?this.getCellDraftValue(p,u):m}),i[p]=a}return i},{});(d=this.options.onHistoryApplied)==null||d.call(this,f,r?s:l??{},c)})},undoHistory(e){if(!this.canUndoHistory())return!1;const{historyCursor:t}=this.state,o=this.getHistory(t);return o?(this.applyHistory(t+1,Le(o.before),e),!0):!1},redoHistory(e){if(!this.canRedoHistory())return!1;const{historyCursor:t}=this.state,o=this.getHistory(t-1);return o?(this.applyHistory(t-1,Le(o.after),e),!0):!1},canUndoHistory(){const{historyCursor:e,historyItems:t}=this.state;return t.length>0&&e<t.length},canRedoHistory(){return this.state.historyCursor>0}}}),Di="";function Gr(){var y,b;const{scrollToMouse:e}=this.data;if(!e)return this.stopScrollToMouse();const{position:t,startTime:o,delay:n}=e;if(!t||Date.now()-o<n)return;const r=(b=(y=this.ref.current)==null?void 0:y.querySelector(".dtable-rows"))==null?void 0:b.getBoundingClientRect();if(!r)return;const{maxStep:s,detectPadding:l,speed:c}=e,{x:f,y:d}=t,{left:i,top:p,right:h,bottom:a}=r;let u=0;f<i-l?u=-Math.max(s,i-l-f):f>h-l&&(u=Math.max(s,f-(h-l)));let m=0;d<p-l?m=-Math.max(s,p-l-d):d>a-l&&(m=Math.max(s,d-(a-l)));const _={};u!==0&&(_.scrollLeft=this.layout.scrollLeft+c*u),m!==0&&(_.scrollTop=this.layout.scrollTop+c*m),Object.keys(_).length&&this.scroll(_)}const Xr=B({name:"autoscroll",plugins:[Yt],events:{document_mousemovesmooth(e){if(!this.data.scrollToMouse)return;const{clientX:t,clientY:o}=e;this.data.scrollToMouse.position={x:t,y:o}}},methods:{scrollTo({col:e,row:t,extra:o=2}){const n=this.getColInfo(e),r=this.getRowInfo(t);if(!n&&!r)return!1;const s={},{layout:l}=this;if(n){const{scrollLeft:c,colsInfo:f}=l,d=n.left+n.realWidth;n.left<c?s.scrollLeft=n.left-o:d>f.scrollWidth+c&&(s.scrollLeft=d-f.scrollWidth+o)}if(r){const{scrollTop:c,rowHeight:f,rowsHeight:d}=l,i=r.top+f;r.top<c?s.scrollTop=r.top-o:i>d+c&&(s.scrollTop=i-d+o)}return this.scroll(s),!0},startScrollToMouse(e){const t={interval:60,speed:.2,delay:200,maxStep:this.options.rowHeight,onlyInside:!1,detectPadding:30,startTime:Date.now(),...e};this.data.scrollToMouse=t,clearInterval(this.data.scrollToTimer),this.data.scrollToTimer=window.setInterval(Gr.bind(this),t.interval)},stopScrollToMouse(){clearInterval(this.data.scrollToTimer),this.data.scrollToMouse=void 0}},onUnmounted(){clearInterval(this.data.scrollToTimer)}});function Yr(e,t){const{colsCount:o,rowsCount:n}=e.getGridSize(),{cols:r=[]}=t,{showRowIndex:s,defaultColWidth:l}=e.options,c=[];s!==!1&&c.push({width:`${n+1}`.length*8+24,name:"INDEX",fixed:"left",align:"right",title:"#",...r.find(f=>f.name==="INDEX")});for(let f=0;f<o;++f){const d=`C${f+1}`,i={name:d,width:l,...r.find(p=>p.name===d)};c.push(i)}return{cols:c,data:n}}function qr(e,t,o){var n,r;return t.name==="INDEX"?e.id==="HEADER"?o:e.index+1:e.id!=="HEADER"?(r=(n=this.options.datasource.data)==null?void 0:n[+e.id])==null?void 0:r[+t.name.replace("C","")-1]:o}function yt(e,t,o){e.selectNextCell(o)&&(t.preventDefault(),t.stopPropagation())}const Jr={delete(){this.deleteSelections()},cut(){this.cutSelections()},selectAll(e){this.selectAllCells(),e.preventDefault()},paste(){this.pasteToSelection()},copy(e){this.copySelections(),e.preventDefault()},focus(){const e=this.getSelectedCells()[0];if(!e)return;const t=this.getColInfo(e.col),o=this.getRowInfo(e.row);!t||!o||this.editCell({rowID:o.id,colName:t.name})},cancel(){this.deselectAllCells()},undo(){this.undoHistory()},redo(){this.redoHistory()},selectRight(e){yt(this,e,"right")},selectLeft(e){yt(this,e,"left")},selectDown(e){yt(this,e,"down")},selectUp(e){yt(this,e,"up")}};function Jn(e,t){Array.isArray(e)||(e=[e]);let o=0,n=0;const r=t==null?void 0:t.ignoreEmptyCell;return e.forEach(s=>{Object.entries(s).forEach(([l,c])=>{l!=="HEADER"&&(o=Math.max(o,+l+1),n=Math.max(n,...Object.keys(c).map(f=>r&&Zn(c[f])||f[0]!=="C"?0:+f.replace("C",""))))})}),{maxRow:o,maxCol:n}}function Qr(){const{minRows:e=1,minCols:t=1,extraRows:o=0,extraCols:n=0,datasource:r}=this.options,{data:s=[],cols:l=[]}=r,{stagingDraft:c,appliedDraft:f}=this.state,{maxRow:d,maxCol:i}=Jn([c,f]);return{rowsCount:Math.max(d,s.length+o,e,this.data.rowsCount??0),colsCount:Math.max(i,t,l.length,s.reduce((p,h)=>Math.max(p,h.length),0)+n,this.data.colsCount??0)}}function Zr(e=1,t){const{rowsCount:o}=this.getGridSize();let n=o;return typeof e=="number"?n=o+Math.max(e,0):Array.isArray(e)&&(n=o+Math.max(e.length,0),this.stageDraft(e.reduce((r,s,l)=>(Array.isArray(s)&&(s=s.reduce((c,f,d)=>(c[`C${d+1}`]=f,c),{})),r[o+l]=s,r),{}),{skipUpdate:!0})),n>o?(this.data.rowsCount=n,t!=null&&t.skipUpdate||this.update({dirtyType:"options"},()=>{(t==null?void 0:t.select)!==!1&&this.selectCells(`R${o}:R${n-1}`),(t==null?void 0:t.autoScroll)!==!1&&this.scrollTo({row:n-1,col:0})}),!0):!1}function ei(e=1,t){const{colsCount:o}=this.getGridSize();let n=o;const{showRowIndex:r}=this.options;return typeof e=="number"?n=o+Math.max(e,0):Array.isArray(e)&&(n=o+Math.max(e.length,0),this.stageDraft(e.reduce((s,l,c)=>(l.forEach((f,d)=>{const i=s[d],p=`C${o+c+(r?1:0)}`;i?i[p]=f:s[d]={[p]:f}}),s),{}),{skipUpdate:!0})),n>o?(this.data.colsCount=n,t!=null&&t.skipUpdate||this.update({dirtyType:"options"},()=>{(t==null?void 0:t.select)!==!1&&this.selectCells(`C${o+(r?1:0)}:C${n-1+(r?1:0)}`),(t==null?void 0:t.autoScroll)!==!1&&this.scrollTo({col:n-(r?0:1),row:0})}),!0):!1}function Qn(e,t){const o=this.getGridSize(),n=Math.max(0,(e.rowsCount??0)-o.rowsCount),r=Math.max(0,(e.colsCount??0)-o.colsCount);return n&&this.appendRows(n,{skipUpdate:!0,select:!1}),r&&this.appendCols(r,{skipUpdate:!0,select:!1}),n||r?(t!=null&&t.skipUpdate||this.update({dirtyType:"options"}),!0):!1}function Zn(e){return e==null||typeof e=="string"&&!e.length}function es(e){let t=0,o=0;return e.forEach((n,r)=>{n.forEach((s,l)=>{Zn(s)||(t=Math.max(t,l),o=Math.max(o,r))})}),e.slice(0,o+1).map(n=>n.slice(0,t+1))}const ts={name:"datagrid",plugins:[hr,Dr,Kr,ur,Br,Xr],defaultOptions:{defaultColWidth:80,headerEditable:!0,minRows:20,minCols:10,extraRows:5,extraCols:5,showRowIndex:!0,rowHover:!1,colHover:!1,cellHover:!0,bordered:!0,striped:!1,datagridHotkeys:{},cellValueSplitter:"	",cellValueGetter:qr,hotkeys:{},autoExpandGrid:!0},options(e){const{datagridHotkeys:t,datasource:o,hotkeys:n,editable:r,selectable:s,beforeSelectCells:l,showRowIndex:c,colResize:f,onPasteToCell:d,afterStageDraft:i}=e,p={delete:"delete,backspace",selectAll:"ctrl+a,command+a",paste:"ctrl+v,command+v",copy:"ctrl+c,command+c",focus:"enter",cancel:"esc",cut:"ctrl+x,command+x",redo:"ctrl+shift+z,command+shift+z",undo:"ctrl+z,command+z",selectRight:"tab,right",selectLeft:"left",selectDown:"down",selectUp:"up"};return{hotkeys:{...n,...Object.entries({...p,...t}).reduce((a,[u,m])=>{var _;return m&&(a[m===!0?p[u]:m]=(_=Jr[u])==null?void 0:_.bind(this)),a},{})},colResize:f?a=>(typeof f!="function"||f.call(this,a))&&a!=="INDEX":!1,editable:r?(a,u)=>typeof r=="function"&&!r(a,u)?!1:u!=="INDEX":!1,selectable:s?a=>typeof s=="function"&&!s(a)?!1:a.col>=(c?1:0):!1,beforeSelectCells:c?a=>(a.every(u=>u.col===0)&&(a=Un.call(this,`R${Math.min(...a.map(u=>u.row))}:R${Math.max(...a.map(u=>u.row))}`)),l?l.call(this,a):a):l,...Yr(this,o),onPasteToCell:a=>{var m;const u=(m=a.clipboardData)==null?void 0:m.getData("text");typeof u=="string"&&(u.includes("	")||u.includes(`
`))&&this.state.editingCell&&(this.pasteCells(this.state.editingCell,{data:u}),a.preventDefault()),d==null||d.call(this,a)},afterStageDraft:(a,u,m,_)=>{i==null||i.call(this,a,u,m,_);const{autoExpandGrid:y}=this.options;if(!y)return;const{maxCol:b,maxRow:C}=Jn(u,{ignoreEmptyCell:!0}),{extraCols:S=1,extraRows:j=1}=this.options;this.expandGridSize({rowsCount:C+(typeof y=="number"?y:j),colsCount:b+(typeof y=="number"?y:S)},_)}}},methods:{deleteSelections(){const e=[];for(const[t,o]of this.state.selectedMap.entries()){const n=this.getColInfo(t);if(n)for(const r of o){const s=this.getRowInfo(r);s&&e.push({colName:n.name,rowID:s.id})}}return this.deleteCells(e)},deleteSelectedRows(){const e=this.getSelectedRows();return e.length?(this.deleteRows(e),this.deselectAllCells(),!0):!1},deleteSelectedCols(){const e=this.getSelectedCols();return e.length?(this.deleteCols(e),this.deselectAllCells(),!0):!1},copySelectedCols(){const e=this.getSelectedCols();if(!e.length)return!1;const t=this.layout.rows.length,o=[];for(let r=-1;r<t;++r)o.push(e.map(s=>{const l=this.getCellDraftValue(r,s);return r===-1&&l===s.name?"":l}));const n=es(o).map(r=>r.join("	")).join(`
`);return navigator.clipboard.writeText(n),!0},clearSelectedCols(){const e=this.getSelectedCols();if(!e.length)return!1;const t={},{emptyCellValue:o}=this.options;return[this.getRowInfo("HEADER"),...this.layout.rows].forEach(n=>{const r={};e.forEach(s=>{const l=this.getCellDraftValue(n,s);l!=null&&l!==o&&(r[s.name]=o)}),Object.keys(r).length&&(t[n.id]=r)}),Object.keys(t).length?(this.stageDraft(t),!0):!1},async pasteToSelectedCol(){const e=this.getSelectedCols();return e.length?await this.pasteCells({colName:e[0].name,rowID:"HEADER"}):!1},cutSelectedCols(){return this.copySelectedCols(),this.clearSelectedCols()},copySelections(){const e=this.getSelectedCells();if(!e.length)return!1;let t=Number.MAX_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER;e.forEach(s=>{t=Math.min(s.col,t),o=Math.min(s.row,o)});const n=[];e.forEach(s=>{const l=this.getCellDraftValue(s.row,s.col);let c=n[s.row-o];c||(c=[],n[s.row-o]=c),c[s.col-t]=l});const r=es(n).map(s=>s.join("	")).join(`
`);return navigator.clipboard.writeText(r),!0},cutSelections(){return this.copySelections(),this.deleteSelections()},async pasteCells(e,t){var h,a;let o=-1,n=-1;if("colName"in e){const u=this.getColInfo(e.colName),m=this.getRowInfo(e.rowID);if(!u||!m)return!1;o=u.index,n=m.index}else o=e.col,n=e.row;let r=t==null?void 0:t.data;if(r===void 0)try{const u="clipboard-read";if((await navigator.permissions.query({name:u})).state==="denied")return(h=this.options.onReadClipboardFail)==null||h.call(this),!1;r=await navigator.clipboard.readText()}catch{return(a=this.options.onReadClipboardFail)==null||a.call(this),!1}if(!r.length)return!1;const s={},l=[],c=(t==null?void 0:t.expandCells)!==!1;let f=!1,d=0,i=0;const p=r.split(/\r?\n/);return p.forEach((u,m)=>{var C;if(!u.trim().length&&m===p.length-1)return;const _=m+n;let y=(C=this.getRowInfo(_))==null?void 0:C.id;if(y===void 0){if(!c)return;f=!0,y=`${_}`}let b=s[y];b||(b={},s[y]=b),u.split("	").forEach((S,j)=>{var v;const E=j+o;let I=(v=this.getColInfo(E))==null?void 0:v.name;if(I===void 0){if(!c)return;f=!0,I=`C${E}`}b[I]=S,l.push({col:E,row:_}),d=Math.max(d,_),i=Math.max(i,E)})}),this.stageDraft(s,{skipUpdate:!0}),(t==null?void 0:t.select)!==!1&&this.selectCells(l),this.update({dirtyType:f?"options":void 0},()=>{t!=null&&t.autoscroll&&this.scrollTo({col:i,row:d})}),!0},pasteToSelection(){const e=this.getSelectedCells();if(!e.length)return Promise.resolve(!1);const t=e[0];return this.pasteCells(t)},getGridSize:Qr,appendRows:Zr,appendCols:ei,expandGridSize:Qn},onRender(){return{className:"dtable-datagrid"}}},ti=B(ts);D.datagrid=ti,D.datagridPlugin=ts,D.expandGridSize=Qn,Object.defineProperty(D,Symbol.toStringTag,{value:"Module"})});
